{"version":3,"sources":["webpack:///webpack/bootstrap c122eb32db6731db30af","webpack:///./js/engine/main.js","webpack:///./js/asset_data/blue_sheet.json","webpack:///./js/engine/asset_loader.js","webpack:///./js/engine/scene_node.js","webpack:///./js/engine/texture.js","webpack:///./js/engine/panel.js"],"names":["canvas","document","getElementById","ctx","getContext","NONE","undefined","TL","x","y","Object","freeze","rootNode","renderGraph","node","save","translate","translation","rotate","rotation","scale","texture","visible","offset","children","forEach","child","restore","draw","clearRect","width","height","then","atlas","panel","get","panelNode","addChild","TextureAtlas","image","data","SubTexture","item","name","refTexture","find","split","console","log","loadAsset","loadData","Promise","resolve","reject","url","imagePath","img","Image","onload","onerror","src","SceneNode","parent","zIndex","push","length","sort","a","b","Texture","srcImage","drawTexture","drawImage","splitTextures","cornerLength","st","northwest","north","northeast","west","center","east","southwest","south","southeast","panel_center_w","panel_center_h","sub","assign","Panel","Error","subtextures","_width","_height","txOffset","nodes","tex","centerScaleW","centerScaleH"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c122eb32db6731db30af","// Let's draw a couple things from a scene graph\nimport BlueSheet from \"../asset_data/blue_sheet.json\"\nimport loadAtlas from \"./asset_loader\"\nimport SceneNode from \"./scene_node\"\nimport { Texture, drawTexture } from \"./texture\";\nimport Panel from \"./panel\"\n\nconst canvas = document.getElementById(\"test\");\nconst ctx = canvas.getContext(\"2d\");\nconst NONE = undefined;\n\nconst TL = {x:0,y:0};\nObject.freeze(TL);\n\nconst rootNode = new SceneNode();\n\nfunction renderGraph(node){\n  ctx.save();\n  ctx.translate(node.translation.x, node.translation.y);\n  ctx.rotate(node.rotation);\n  ctx.scale(node.scale.x, node.scale.y);\n\n  if(node.texture && node.visible){\n    drawTexture(ctx, node.texture, node.offset);\n  }\n  if(node.children){\n    node.children.forEach(child => renderGraph(child));\n  }\n  ctx.restore();\n}\n\n// nodes will go in a dfs traversal\nfunction draw(){\n  ctx.clearRect(0,0, canvas.width, canvas.height);\n  renderGraph(rootNode);\n}\n\n\nloadAtlas(BlueSheet).then((atlas)=>{\n  // let baseTexture = atlas.get(\"blue_panel\")\n  // we're going to build a special panel\n  // we can give the size we want in order to use it\n  rootNode.translation.x = 0;\n  rootNode.translation.y = 0;\n\n\n  let panel = new Panel(atlas.get(\"blue_panel\"), 500, 50);\n  panel.panelNode.translation.x = 5;\n  panel.panelNode.translation.y = 5;\n  rootNode.addChild(panel.panelNode);\n\n  draw();\n  //setInterval(draw,1);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/main.js","module.exports = {\"TextureAtlas\":{\"imagePath\":\"./assets/ui_sheets/blueSheet.png\",\"SubTexture\":[{\"name\":\"blue_boxCheckmark.png\",\"x\":\"380\",\"y\":\"36\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxCross.png\",\"x\":\"380\",\"y\":\"0\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxTick.png\",\"x\":\"386\",\"y\":\"210\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_button00.png\",\"x\":\"0\",\"y\":\"94\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button01.png\",\"x\":\"190\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button02.png\",\"x\":\"190\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button03.png\",\"x\":\"0\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button04.png\",\"x\":\"0\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button05.png\",\"x\":\"0\",\"y\":\"192\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button06.png\",\"x\":\"288\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button07.png\",\"x\":\"239\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button08.png\",\"x\":\"190\",\"y\":\"194\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button09.png\",\"x\":\"339\",\"y\":\"94\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button10.png\",\"x\":\"290\",\"y\":\"94\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button11.png\",\"x\":\"337\",\"y\":\"184\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button12.png\",\"x\":\"290\",\"y\":\"139\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button13.png\",\"x\":\"0\",\"y\":\"143\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_checkmark.png\",\"x\":\"337\",\"y\":\"233\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"blue_circle.png\",\"x\":\"386\",\"y\":\"174\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_cross.png\",\"x\":\"0\",\"y\":\"237\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"blue_panel.png\",\"x\":\"190\",\"y\":\"94\",\"width\":\"100\",\"height\":\"100\"},{\"name\":\"blue_sliderDown.png\",\"x\":\"416\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_sliderLeft.png\",\"x\":\"339\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderRight.png\",\"x\":\"378\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderUp.png\",\"x\":\"388\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_tick.png\",\"x\":\"18\",\"y\":\"239\",\"width\":\"17\",\"height\":\"17\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/asset_data/blue_sheet.json\n// module id = 1\n// module chunks = 0","import {Texture} from \"./texture\"\n\nclass TextureAtlas {\n  constructor(image, data){\n    this.image = image;\n    this.data = data.TextureAtlas.SubTexture;\n    // TODO: Initialize image references to all of them?\n\n    // Convert each item string value to numbers\n    this.data.forEach((item)=>{\n      item.x = +item.x;\n      item.y = +item.y;\n      item.width = +item.width;\n      item.height = +item.height;\n    });\n  }\n  get(name){\n    // var texture = {};\n    let refTexture = this.data.find((item)=>{\n      return item.name.split(\".\")[0] === name;\n    });\n    console.log(refTexture);\n    let texture = new Texture(\n      refTexture.name,\n      this.image,\n      +refTexture.x,\n      +refTexture.y,\n      +refTexture.width,\n      +refTexture.height\n    )\n    console.log(texture);\n    return texture;\n  }\n}\n\nconst loadAsset = (loadData) => {\n  return new Promise((resolve, reject) => {\n    // Load base image\n    let url = loadData.TextureAtlas.imagePath;\n    let img = new Image();\n    img.onload = () => {\n      resolve(new TextureAtlas(img, loadData))\n    };\n    img.onerror = () => {\n      reject();\n    };\n    img.src = url;\n  });\n};\n\nexport default loadAsset;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/asset_loader.js","class SceneNode {\n  constructor(\n    parent,\n    translation = {x:0,y:0},\n    rotation = 0,\n    scale = {x:1,y:1},\n    texture,\n    zIndex,\n    offset = {x:0.5, y: 0.5},\n    visible = true\n  ){\n    // fairly straightforward mapping of nodes\n    this.translation = translation;\n    this.rotation = rotation;\n    this.scale = scale;\n    this.texture = texture;\n\n    this.zIndex = zIndex;\n\n    // Don't allocate arrays until we need to\n    this.children = null;\n    this.parent = parent;\n    this.visible = visible;\n    if(this.parent != null){\n      this.parent.addChild(this);\n    }\n  }\n\n  addChild(node){\n    if(this.children == null){\n      this.children = [];\n    }\n    node.parent = this;\n    this.children.push(node);\n\n    // assign a default zIndex, relatively naive :)\n    if(node.zIndex == null){\n      node.zIndex = this.children.length;\n    } else {\n      // Maybe we need to sort our children?\n      this.children.sort((a,b)=>{return a.zIndex - b.zIndex;})\n    }\n  }\n}\n\nexport default SceneNode;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/scene_node.js","class Texture {\n  constructor(\n    name,\n    srcImage,\n    x, y,\n    width, height,\n  ){\n    this.name = name,\n    this.srcImage = srcImage;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n}\n\n// Origin is currently hardcoded to center\nconst drawTexture = (ctx, texture,\n  offset = {x:0.5, y:0.5}) =>{\n  ctx.drawImage(texture.srcImage,\n    texture.x, texture.y,\n    texture.width, texture.height,\n    // we'll mess with this part next :)\n    (-offset.x)*texture.width,\n    (-offset.y)*texture.height,\n    texture.width,\n    texture.height);\n}\n\nexport {Texture, drawTexture};\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/texture.js","// const NORTH = 0, MID = 1, SOUTH = 2,\n//       WEST = 0,           EAST  = 2;\n//\n// class Panel {\n//   constructor(texture, x,y, width = 100, height = 100,offset = 10){\n//     this.texture = texture;\n//     this.x = x;\n//     this.y = y;\n//     this.height = height;\n//     this.width = width;\n//     this.split = []\n//     this.offset = offset;\n//     for(let i = 0; i < 3; i++){\n//       for(let j = 0; j < 3; j++){\n//         const side = Object.assign({}, texture)\n//\n//         switch(i){\n//           case NORTH:\n//             side.height = offset;\n//             break;\n//           case MID:\n//             side.y = side.y + offset;\n//             side.height = 1;\n//             break;\n//           case SOUTH:\n//             side.y = side.y + side.height - offset;\n//             side.height = offset;\n//             break;\n//         }\n//         switch(j){\n//           case WEST:\n//             side.width = offset;\n//             break;\n//           case MID:\n//             side.x = side.x + offset;\n//             side.width = 1;\n//             break;\n//           case EAST:\n//             side.x = side.x + side.width - offset;\n//             side.width = offset;\n//             break;\n//         }\n//         this.split.push(side);\n//       }\n//     }\n//\n//   }\n//   draw(drawTexture){\n//     const [nw,n,ne, w,m,e,sw,s,se] = this.split;\n//     let x = this.x, y = this.y;\n//     drawTexture(nw,x,y);\n//\n//     x = this.x + this.offset;\n//     drawTexture(n,x,y,(this.width - this.offset*2), 1);\n//\n//     x = this.x + this.width - this.offset;\n//     drawTexture(ne,x,y);\n//\n//     x = this.x;\n//     y = this.y + this.offset;\n//     drawTexture(w,x,y,1,this.height - this.offset * 2);\n//\n//     x = this.x + this.offset;\n//     drawTexture(m,x,y,this.width - this.offset*2,this.height - this.offset * 2);\n//\n//     x = this.x + this.width - this.offset;\n//     drawTexture(e,x,y,1,this.height - this.offset * 2);\n//\n//     x = this.x;\n//     y = this.y + this.height - this.offset;\n//     drawTexture(sw,x,y);\n//\n//     x = this.x + this.offset;\n//     drawTexture(s,x,y,this.width - this.offset*2,1);\n//\n//     x = this.x + this.width - this.offset;\n//     drawTexture(se,x,y);\n//   }\n// }\n//\n// export default Panel;\nimport {Texture} from \"./texture\"\nimport SceneNode from \"./scene_node\"\n\nconst TL = {\n  x:0,\n  y:0\n};\nObject.freeze(TL);\n\nconst splitTextures = (texture, cornerLength) => {\n  let st = {\n    northwest: {},\n    north: {},\n    northeast: {},\n    west: {},\n    center: {},\n    east: {},\n    southwest: {},\n    south: {},\n    southeast: {}\n  };\n\n  let panel_center_w = texture.width - cornerLength*2;\n  let panel_center_h = texture.height - cornerLength*2;\n\n  console.log(panel_center_w);\n  console.log(panel_center_h);\n\n  for(let sub in st){\n    Object.assign(st[sub], texture);\n  }\n  console.log(st);\n\n  // North Row\n  st.northwest.name += \"_NW\";\n  st.northwest.width = cornerLength;\n  st.northwest.height = cornerLength;\n\n  st.north.name += \"_N\";\n  st.north.width = panel_center_w;\n  st.north.height = cornerLength;\n  st.north.x += cornerLength;\n\n  st.northeast.name += \"_NE\";\n  st.northeast.width = cornerLength;\n  st.northeast.height = cornerLength;\n  st.northeast.x += cornerLength + panel_center_w;\n\n  // Center Row\n  st.west.name += \"_W\";\n  st.west.width = cornerLength;\n  st.west.height = panel_center_h;\n  st.west.y += cornerLength;\n\n  st.center.name += \"_C\";\n  st.center.width = panel_center_w;\n  st.center.height = panel_center_h;\n  st.center.x += cornerLength;\n  st.center.y += cornerLength;\n\n  st.east.name += \"_E\";\n  st.east.width = cornerLength;\n  st.east.height = panel_center_h;\n  st.east.x += cornerLength + panel_center_w;\n  st.east.y += cornerLength;\n\n  st.southwest.name += \"_SW\";\n  st.southwest.width = cornerLength;\n  st.southwest.height = cornerLength;\n\n  st.southwest.y += cornerLength + panel_center_h;\n\n  st.south.name += \"_S\";\n  st.south.width = panel_center_w;\n  st.south.height = cornerLength;\n  st.south.x += cornerLength;\n  st.south.y += cornerLength + panel_center_h;\n\n  st.southeast.name += \"_SE\";\n  st.southeast.width = cornerLength;\n  st.southeast.height = cornerLength;\n  st.southeast.x += cornerLength + panel_center_w;\n  st.southeast.y += cornerLength + panel_center_h;\n\n  return st;\n};\n\nclass Panel {\n  constructor(texture, width, height, cornerLength = 10){\n    // we have a terrible error\n    if(texture == null){\n      throw new Error(\"Panel must have a texture\");\n    }\n\n    this.texture = texture;;\n    this.cornerLength = cornerLength;\n    const subtextures = splitTextures(this.texture, this.cornerLength);\n\n    this.panelNode = new SceneNode();\n    this._width = width;\n    this._height = height;\n\n    let txOffset = {\n      x: subtextures.northwest.x,\n      y: subtextures.northwest.y\n    }\n    const nodes = {};\n    for(let st in subtextures){\n      let node = new SceneNode(this.panelNode);\n      let tex = subtextures[st]\n      node.texture = tex;\n      node.offset = TL;\n      nodes[st] = node;\n      node.visible = false;\n    }\n\n    const centerScaleW = (this._width - cornerLength * 2)/(this.texture.width - cornerLength * 2);\n    const centerScaleH = (this._height - cornerLength * 2)/(this.texture.height - cornerLength * 2);\n\n\n    nodes.northwest.visible = true;\n\n    nodes.north.visible = true;\n    nodes.north.translation.x += cornerLength;\n    nodes.north.scale.x = centerScaleW;\n\n    nodes.northeast.visible = true;\n    nodes.northeast.translation.x += this._width - cornerLength;\n\n    nodes.west.visible = true;\n    nodes.west.translation.y += cornerLength;\n    nodes.west.scale.y = centerScaleH;\n\n    nodes.center.visible = true;\n    nodes.center.translation.x += cornerLength;\n    nodes.center.translation.y += cornerLength;\n    nodes.center.scale.x = centerScaleW;\n    nodes.center.scale.y = centerScaleH;\n\n    nodes.east.visible = true;\n    nodes.east.translation.x += this._width - cornerLength;\n    nodes.east.translation.y += cornerLength;\n    nodes.east.scale.y = centerScaleH;\n\n    nodes.southwest.visible = true;\n    nodes.southwest.translation.y += this._height - cornerLength;\n\n    nodes.south.visible = true;\n    nodes.south.translation.x += cornerLength;\n    nodes.south.translation.y += this._height - cornerLength;\n    nodes.south.scale.x = centerScaleW;\n\n    nodes.southeast.visible = true;\n    nodes.southeast.translation.x += this._width - cornerLength;\n    nodes.southeast.translation.y += this._height - cornerLength;\n\n  }\n\n}\n\nexport default Panel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/panel.js"],"sourceRoot":""}