{"version":3,"sources":["webpack:///webpack/bootstrap e902f98ac03d77341b98","webpack:///./js/engine/texture.js","webpack:///./js/engine/scene_node.js","webpack:///./js/engine/main.js","webpack:///./js/asset_data/blue_sheet.json","webpack:///./js/engine/asset_loader.js","webpack:///./js/engine/panel.js","webpack:///./js/engine/button.js","webpack:///./js/engine/transform.js","webpack:///./js/engine/utils.js","webpack:///./js/engine/bounds.js"],"names":["Texture","name","srcImage","x","y","width","height","drawTexture","ctx","texture","offset","drawImage","SceneNode","parent","translation","rotation","scale","zIndex","visible","children","addChild","textStyle","undefined","text","node","push","length","sort","a","b","noop","traverseGraph","before","after","forEach","child","cb","canvas","document","getElementById","getContext","lastClick","handled","draw","buttonClicked","transformStack","clearRect","rootNode","save","translate","rotate","currentTransform","multiply","transferred","invert","transformPoint","bounds","contains","restore","pop","console","log","then","atlas","Math","PI","get","setInterval","onclick","e","rect","getBoundingClientRect","clientX","left","clientY","top","TextureAtlas","image","data","SubTexture","item","refTexture","find","split","loadAsset","loadData","Promise","resolve","reject","url","imagePath","img","Image","onload","onerror","src","TL","Object","freeze","splitTextures","cornerLength","st","northwest","north","northeast","west","center","east","southwest","south","southeast","panel_center_w","panel_center_h","sub","assign","Panel","Error","subtextures","_width","_height","txOffset","nodes","tex","centerScaleW","centerScaleH","Button","textures","upNode","downNode","textNode","Transform","reset","m","matrix","m11","m12","m21","m22","dx","dy","d","m0","m1","m2","m3","m4","m5","rad","c","cos","s","sin","sx","sy","i","px","py","set","nodeTransform","between","last","arr","RectangleBounds","point"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e902f98ac03d77341b98","class Texture {\n  constructor(\n    name,\n    srcImage,\n    x, y,\n    width, height,\n  ){\n    this.name = name,\n    this.srcImage = srcImage;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n}\n\n// Origin is currently hardcoded to center\nconst drawTexture = (ctx, texture,\n  offset = {x:0.5, y:0.5}) =>{\n  ctx.drawImage(texture.srcImage,\n    texture.x, texture.y,\n    texture.width, texture.height,\n    // we'll mess with this part next :)\n    (-offset.x)*texture.width,\n    (-offset.y)*texture.height,\n    texture.width,\n    texture.height);\n}\n\nexport {Texture, drawTexture};\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/texture.js","class SceneNode {\n  constructor(\n    parent,\n    translation = {x:0,y:0},\n    rotation = 0,\n    scale = {x:1,y:1},\n    texture,\n    zIndex,\n    offset = {x:0.5, y: 0.5},\n    visible = true,\n  ){\n    // fairly straightforward mapping of nodes\n    this.translation = translation;\n    this.rotation = rotation;\n    this.scale = scale;\n    this.texture = texture;\n    this.zIndex = zIndex;\n\n    // Don't allocate arrays until we need to\n    this.children = null;\n    this.parent = parent;\n    this.visible = visible;\n    if(this.parent != null){\n      this.parent.addChild(this);\n    }\n\n    this.offset = offset;\n\n    // define this later if I need to\n    this.textStyle = undefined;\n    this.text = undefined;\n  }\n\n  addChild(node){\n    if(this.children == null){\n      this.children = [];\n    }\n    node.parent = this;\n    this.children.push(node);\n\n    // assign a default zIndex, relatively naive :)\n    if(node.zIndex == null){\n      node.zIndex = this.children.length;\n    } else {\n      // Maybe we need to sort our children?\n      this.children.sort((a,b)=>{return a.zIndex - b.zIndex;})\n    }\n  }\n}\n// Click tester that keeps up with rotations etc\n// Check if our source image has pixels there?\n// function renderGraph(ctx, node){\n//   ctx.save();\n//   ctx.translate(node.translation.x, node.translation.y);\n//   ctx.rotate(node.rotation);\n//   ctx.scale(node.scale.x, node.scale.y);\n//\n//   if(node.texture && node.visible){\n//     drawTexture(ctx, node.texture, node.offset);\n//   }\n//   if(node.text && node.visible){\n//     drawText(ctx, node.text, node.textStyle)\n//   }\n//   if(node.children && node.visible){\n//     node.children.forEach(child => renderGraph(ctx, child));\n//   }\n//   ctx.restore();\n// }\n\nconst noop = () => {};\nfunction traverseGraph(node, before = noop, after = noop){\n  // we can tell it to stop\n  if(before(node) && node.children){\n    node.children.forEach(child => traverseGraph(child, cb))\n  }\n  after(node);\n}\n\nexport { SceneNode, traverseGraph };\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/scene_node.js","// Let's draw a couple things from a scene graph\nimport BlueSheet from \"../asset_data/blue_sheet.json\"\nimport loadAtlas from \"./asset_loader\"\nimport { SceneNode, traverseGraph} from \"./scene_node\"\nimport { Texture, drawTexture } from \"./texture\"\nimport Panel from \"./panel\"\nimport Button from \"./button\"\nimport { between, last} from \"./utils\"\nimport { Transform, nodeTransform} from \"./transform\"\nimport { RectangleBounds } from \"./bounds\"\nconst canvas = document.getElementById(\"test\");\nconst ctx = canvas.getContext(\"2d\");\n\nconst lastClick = {x:0,y:0, handled: true}\n\nfunction draw(){ // RENDER AND PROCESS UI EVENTS\n  let buttonClicked = false;\n  const transformStack = [new Transform()];\n  ctx.clearRect(0,0, canvas.width, canvas.height);\n\n  traverseGraph(rootNode,\n  (node) => {\n    ctx.save();\n    ctx.translate(node.translation.x, node.translation.y);\n    ctx.rotate(node.rotation);\n    ctx.scale(node.scale.x, node.scale.y);\n    // Update our current transform and push it onto the list\n    const currentTransform = last(transformStack).multiply(nodeTransform(node));\n    transformStack.push(currentTransform);\n\n    const transferred = currentTransform.invert().transformPoint(lastClick.x, lastClick.y)\n    // I don't think we've handled offset\n    //last(transformStack).print();\n    if(!lastClick.handled){\n      if(node.bounds &&\n          node.bounds.contains(\n            transferred\n          )\n      ){\n        buttonClicked = true;\n      }\n    }\n\n    if(node.texture && node.visible){\n      drawTexture(ctx, node.texture, node.offset);\n    }\n\n    return true;\n  },\n  (node) => {\n    ctx.restore();\n    transformStack.pop();\n  });\n\n  if(buttonClicked){\n    console.log(\"You clicked the button!\");\n    buttonClicked = false;\n  }\n\n  lastClick.handled = true;\n}\n\nconst rootNode = new SceneNode();\nloadAtlas(BlueSheet).then((atlas)=>{\n  rootNode.translation.x = 400;\n  rootNode.translation.y = 80;\n  rootNode.rotation = Math.PI/8\n  const texture = atlas.get(\"blue_button00\");\n  rootNode.offset = {x:1, y:0};\n  rootNode.bounds = new RectangleBounds(\n    texture.width, texture.height, rootNode.offset\n  );\n  rootNode.texture = texture;\n  setInterval(draw,1);\n});\n\ncanvas.onclick = (e) => {\n  const rect = canvas.getBoundingClientRect()\n  lastClick.x = e.clientX - rect.left;\n  lastClick.y = e.clientY - rect.top;\n  lastClick.handled = false;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/main.js","module.exports = {\"TextureAtlas\":{\"imagePath\":\"./assets/ui_sheets/blueSheet.png\",\"SubTexture\":[{\"name\":\"blue_boxCheckmark.png\",\"x\":\"380\",\"y\":\"36\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxCross.png\",\"x\":\"380\",\"y\":\"0\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxTick.png\",\"x\":\"386\",\"y\":\"210\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_button00.png\",\"x\":\"0\",\"y\":\"94\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button01.png\",\"x\":\"190\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button02.png\",\"x\":\"190\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button03.png\",\"x\":\"0\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button04.png\",\"x\":\"0\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button05.png\",\"x\":\"0\",\"y\":\"192\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button06.png\",\"x\":\"288\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button07.png\",\"x\":\"239\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button08.png\",\"x\":\"190\",\"y\":\"194\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button09.png\",\"x\":\"339\",\"y\":\"94\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button10.png\",\"x\":\"290\",\"y\":\"94\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button11.png\",\"x\":\"337\",\"y\":\"184\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button12.png\",\"x\":\"290\",\"y\":\"139\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button13.png\",\"x\":\"0\",\"y\":\"143\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_checkmark.png\",\"x\":\"337\",\"y\":\"233\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"blue_circle.png\",\"x\":\"386\",\"y\":\"174\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_cross.png\",\"x\":\"0\",\"y\":\"237\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"blue_panel.png\",\"x\":\"190\",\"y\":\"94\",\"width\":\"100\",\"height\":\"100\"},{\"name\":\"blue_sliderDown.png\",\"x\":\"416\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_sliderLeft.png\",\"x\":\"339\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderRight.png\",\"x\":\"378\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderUp.png\",\"x\":\"388\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_tick.png\",\"x\":\"18\",\"y\":\"239\",\"width\":\"17\",\"height\":\"17\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/asset_data/blue_sheet.json\n// module id = 3\n// module chunks = 0","import {Texture} from \"./texture\"\n\nclass TextureAtlas {\n  constructor(image, data){\n    this.image = image;\n    this.data = data.TextureAtlas.SubTexture;\n    // TODO: Initialize image references to all of them?\n\n    // Convert each item string value to numbers\n    this.data.forEach((item)=>{\n      item.x = +item.x;\n      item.y = +item.y;\n      item.width = +item.width;\n      item.height = +item.height;\n    });\n  }\n  get(name){\n    // var texture = {};\n    let refTexture = this.data.find((item)=>{\n      return item.name.split(\".\")[0] === name;\n    });\n    console.log(refTexture);\n    let texture = new Texture(\n      refTexture.name,\n      this.image,\n      +refTexture.x,\n      +refTexture.y,\n      +refTexture.width,\n      +refTexture.height\n    )\n    console.log(texture);\n    return texture;\n  }\n}\n\nconst loadAsset = (loadData) => {\n  return new Promise((resolve, reject) => {\n    // Load base image\n    let url = loadData.TextureAtlas.imagePath;\n    let img = new Image();\n    img.onload = () => {\n      resolve(new TextureAtlas(img, loadData))\n    };\n    img.onerror = () => {\n      reject();\n    };\n    img.src = url;\n  });\n};\n\nexport default loadAsset;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/asset_loader.js","// const NORTH = 0, MID = 1, SOUTH = 2,\n//       WEST = 0,           EAST  = 2;\n//\n// class Panel {\n//   constructor(texture, x,y, width = 100, height = 100,offset = 10){\n//     this.texture = texture;\n//     this.x = x;\n//     this.y = y;\n//     this.height = height;\n//     this.width = width;\n//     this.split = []\n//     this.offset = offset;\n//     for(let i = 0; i < 3; i++){\n//       for(let j = 0; j < 3; j++){\n//         const side = Object.assign({}, texture)\n//\n//         switch(i){\n//           case NORTH:\n//             side.height = offset;\n//             break;\n//           case MID:\n//             side.y = side.y + offset;\n//             side.height = 1;\n//             break;\n//           case SOUTH:\n//             side.y = side.y + side.height - offset;\n//             side.height = offset;\n//             break;\n//         }\n//         switch(j){\n//           case WEST:\n//             side.width = offset;\n//             break;\n//           case MID:\n//             side.x = side.x + offset;\n//             side.width = 1;\n//             break;\n//           case EAST:\n//             side.x = side.x + side.width - offset;\n//             side.width = offset;\n//             break;\n//         }\n//         this.split.push(side);\n//       }\n//     }\n//\n//   }\n//   draw(drawTexture){\n//     const [nw,n,ne, w,m,e,sw,s,se] = this.split;\n//     let x = this.x, y = this.y;\n//     drawTexture(nw,x,y);\n//\n//     x = this.x + this.offset;\n//     drawTexture(n,x,y,(this.width - this.offset*2), 1);\n//\n//     x = this.x + this.width - this.offset;\n//     drawTexture(ne,x,y);\n//\n//     x = this.x;\n//     y = this.y + this.offset;\n//     drawTexture(w,x,y,1,this.height - this.offset * 2);\n//\n//     x = this.x + this.offset;\n//     drawTexture(m,x,y,this.width - this.offset*2,this.height - this.offset * 2);\n//\n//     x = this.x + this.width - this.offset;\n//     drawTexture(e,x,y,1,this.height - this.offset * 2);\n//\n//     x = this.x;\n//     y = this.y + this.height - this.offset;\n//     drawTexture(sw,x,y);\n//\n//     x = this.x + this.offset;\n//     drawTexture(s,x,y,this.width - this.offset*2,1);\n//\n//     x = this.x + this.width - this.offset;\n//     drawTexture(se,x,y);\n//   }\n// }\n//\n// export default Panel;\nimport {Texture} from \"./texture\"\nimport SceneNode from \"./scene_node\"\n\nconst TL = {\n  x:0,\n  y:0\n};\nObject.freeze(TL);\n\nconst splitTextures = (texture, cornerLength) => {\n  let st = {\n    northwest: {},\n    north: {},\n    northeast: {},\n    west: {},\n    center: {},\n    east: {},\n    southwest: {},\n    south: {},\n    southeast: {}\n  };\n\n  let panel_center_w = texture.width - cornerLength*2;\n  let panel_center_h = texture.height - cornerLength*2;\n\n  console.log(panel_center_w);\n  console.log(panel_center_h);\n\n  for(let sub in st){\n    Object.assign(st[sub], texture);\n  }\n  console.log(st);\n\n  // North Row\n  st.northwest.name += \"_NW\";\n  st.northwest.width = cornerLength;\n  st.northwest.height = cornerLength;\n\n  st.north.name += \"_N\";\n  st.north.width = panel_center_w;\n  st.north.height = cornerLength;\n  st.north.x += cornerLength;\n\n  st.northeast.name += \"_NE\";\n  st.northeast.width = cornerLength;\n  st.northeast.height = cornerLength;\n  st.northeast.x += cornerLength + panel_center_w;\n\n  // Center Row\n  st.west.name += \"_W\";\n  st.west.width = cornerLength;\n  st.west.height = panel_center_h;\n  st.west.y += cornerLength;\n\n  st.center.name += \"_C\";\n  st.center.width = panel_center_w;\n  st.center.height = panel_center_h;\n  st.center.x += cornerLength;\n  st.center.y += cornerLength;\n\n  st.east.name += \"_E\";\n  st.east.width = cornerLength;\n  st.east.height = panel_center_h;\n  st.east.x += cornerLength + panel_center_w;\n  st.east.y += cornerLength;\n\n  st.southwest.name += \"_SW\";\n  st.southwest.width = cornerLength;\n  st.southwest.height = cornerLength;\n\n  st.southwest.y += cornerLength + panel_center_h;\n\n  st.south.name += \"_S\";\n  st.south.width = panel_center_w;\n  st.south.height = cornerLength;\n  st.south.x += cornerLength;\n  st.south.y += cornerLength + panel_center_h;\n\n  st.southeast.name += \"_SE\";\n  st.southeast.width = cornerLength;\n  st.southeast.height = cornerLength;\n  st.southeast.x += cornerLength + panel_center_w;\n  st.southeast.y += cornerLength + panel_center_h;\n\n  return st;\n};\n\nclass Panel {\n  constructor(texture, width, height, cornerLength = 10){\n    // we have a terrible error\n    if(texture == null){\n      throw new Error(\"Panel must have a texture\");\n    }\n\n    this.texture = texture;;\n    this.cornerLength = cornerLength;\n    const subtextures = splitTextures(this.texture, this.cornerLength);\n\n    this.node = new SceneNode();\n    this._width = width;\n    this._height = height;\n\n    let txOffset = {\n      x: subtextures.northwest.x,\n      y: subtextures.northwest.y\n    }\n    const nodes = {};\n    for(let st in subtextures){\n      let node = new SceneNode(this.node);\n      let tex = subtextures[st]\n      node.texture = tex;\n      node.offset = TL;\n      nodes[st] = node;\n      node.visible = false;\n    }\n\n    const centerScaleW = (this._width - cornerLength * 2)/(this.texture.width - cornerLength * 2);\n    const centerScaleH = (this._height - cornerLength * 2)/(this.texture.height - cornerLength * 2);\n\n\n    nodes.northwest.visible = true;\n\n    nodes.north.visible = true;\n    nodes.north.translation.x += cornerLength;\n    nodes.north.scale.x = centerScaleW;\n\n    nodes.northeast.visible = true;\n    nodes.northeast.translation.x += this._width - cornerLength;\n\n    nodes.west.visible = true;\n    nodes.west.translation.y += cornerLength;\n    nodes.west.scale.y = centerScaleH;\n\n    nodes.center.visible = true;\n    nodes.center.translation.x += cornerLength;\n    nodes.center.translation.y += cornerLength;\n    nodes.center.scale.x = centerScaleW;\n    nodes.center.scale.y = centerScaleH;\n\n    nodes.east.visible = true;\n    nodes.east.translation.x += this._width - cornerLength;\n    nodes.east.translation.y += cornerLength;\n    nodes.east.scale.y = centerScaleH;\n\n    nodes.southwest.visible = true;\n    nodes.southwest.translation.y += this._height - cornerLength;\n\n    nodes.south.visible = true;\n    nodes.south.translation.x += cornerLength;\n    nodes.south.translation.y += this._height - cornerLength;\n    nodes.south.scale.x = centerScaleW;\n\n    nodes.southeast.visible = true;\n    nodes.southeast.translation.x += this._width - cornerLength;\n    nodes.southeast.translation.y += this._height - cornerLength;\n\n  }\n\n}\n\nexport default Panel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/panel.js","import SceneNode from './scene_node'\n\nclass Button {\n  constructor(textures, width, height, onclick){\n    this.node = new SceneNode();\n    this.upNode = new SceneNode(this.node);   // Button Released\n    this.upNode.texture = textures[0];\n    this.downNode = new SceneNode(this.node); // Button Pressed\n    this.downNode.texture = textures[1];\n    this.downNode.visible = false;\n\n    this.width = width;\n    this.height = height;\n\n    this.textNode = new SceneNode(this.node);\n    this.textNode.text = \"test\";\n    this.textNode.textStyle = \"white\"\n    this.textNode.translation.x = -30;\n    this.textNode.translation.y = 10;\n\n  }\n  toggle(){\n    this.upNode.visible = this.downNode.visible;\n    this.downNode.visible = !this.downNode.visible;\n    if(this.upNode.visible){\n      this.textNode.translation.y = 10;\n    } else {\n      this.textNode.translation.y = 12;\n    }\n  }\n}\n\nexport default Button;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/button.js","\n// TODO: Really understand matrix transforms\nclass Transform {\n  constructor(){\n    this.reset();\n  }\n  reset(){\n    this.m = [1,0,  // m11, m12 0,1 // Scale and rotation\n              0,1,  // m21, m22 2,3\n              0,0]; // dx, dy, 4,5  // Offset\n    return this;\n  }\n  multiply(matrix){\n    const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n    const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n    const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n\n    return this;\n  }\n  invert(){\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[2] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n\n    return this;\n  }\n  // Transformation is in radians\n  rotate(rad){\n    const c = Math.cos(rad);\n    const s = Math.sin(rad);\n    const m11 = this.m[0] * c + this.m[2] * s;\n    const m12 = this.m[1] * c + this.m[3] * s;\n    const m21 = this.m[0] * -s + this.m[2] * c;\n    const m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n\n    return this;\n  }\n  translate(x,y){\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n\n    return this;\n  }\n  scale(sx, sy){\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n\n    return this;\n  }\n  set(matrix){\n    for(var i = 0; i < 6; i++){\n      this.m[i] = matrix.m[i];\n    }\n    return this;\n  }\n\n  // Transform coordinate into current coordinate space\n  transformPoint(px, py){\n    var x = px;\n    var y = py;\n    px = x * this.m[0] + y * this.m[2] + this.m[4];\n    py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return {x:px,y: py};\n  }\n\n  zeroPoint(){\n    return this.transformPoint(0,0);\n  }\n\n  copy(){\n    return new Transform().set(this);\n  }\n\n  print(){\n    console.log(\"\");\n    console.log(`${this.m[0]}, ${this.m[1]}`);\n    console.log(`${this.m[2]}, ${this.m[3]}`);\n    console.log(`${this.m[4]}, ${this.m[5]}`);\n    return this;\n  }\n\n}\n\nconst nodeTransform = (node) => {\n  return new Transform()\n    .translate(node.translation.x,\n               node.translation.y)\n    .rotate(node.rotation)\n    .scale(node.scale.x, node.scale.y);\n};\n\n\n\n\nexport { Transform, nodeTransform };\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/transform.js","const between = (a,b,c) =>{\n  return (a >= b && a <= c) || (a <= b && a >= c);\n}\nconst last = (arr) => {\n  return arr[arr.length-1];\n}\n\nexport { between, last}\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/utils.js","import { between } from \"./utils\"\n\nclass RectangleBounds {\n  constructor(width,height,offset, x = 0, y = 0){\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n\n    if(offset){\n      this.x = this.x - offset.x*this.width,\n      this.y = this.y - offset.y * this.height;\n    }\n  }\n  contains(point){\n    return (\n      between(point.x, this.x, this.x + this.width) &&\n      between(point.y, this.y, this.y + this.height)\n    );\n  }\n}\n\n\nexport { RectangleBounds }\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/bounds.js"],"sourceRoot":""}