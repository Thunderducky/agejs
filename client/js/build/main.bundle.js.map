{"version":3,"sources":["webpack:///webpack/bootstrap 699b91678a86957a9c28","webpack:///./js/engine/core/texture.js","webpack:///./js/engine/core/scene_node.js","webpack:///./js/engine/core/state_management.js","webpack:///./js/engine/core/utils.js","webpack:///./js/engine/main.js","webpack:///./js/asset_data/grey_sheet.json","webpack:///./js/engine/core/asset_loader.js","webpack:///./js/engine/engine.js","webpack:///./js/engine/core/game_loop.js","webpack:///./js/engine/core/render_management.js","webpack:///./js/engine/core/input_management.js","webpack:///./js/engine/core/transform.js","webpack:///./js/engine/core/bounds.js","webpack:///./js/engine/panel.js","webpack:///./js/engine/core/game_text.js","webpack:///./js/asset_data/blue_sheet.json","webpack:///./js/engine/button.js"],"names":["Texture","name","srcImage","x","y","width","height","drawTexture","ctx","texture","offset","drawImage","noop","SceneNode","parent","translation","rotation","scale","zIndex","visible","onclick","children","addChild","text","undefined","node","push","length","sort","a","b","traverseGraph","before","after","forEach","child","State","manager","onEnter","onUpdate","onExit","StateManager","systems","_currentState","_nextState","state","between","c","last","arr","canvas","document","getElementById","engine","loadState","renderState","newNode","panel","me","root","scene_graph","Promise","all","then","atlases","greyAtlas","blueAtlas","panelTexture","get","setNext","console","log","stateManager","start","TextureAtlas","image","data","SubTexture","item","refTexture","find","split","loadAsset","loadData","resolve","reject","url","imagePath","img","Image","onload","onerror","src","Engine","input_manager","render_manager","getContext","loop","onLoop","stepTime","totalTime","onNode","afterNode","update","reset","stop","getTime","window","performance","now","Loop","breakLoop","startTime","lastTime","_loop","bind","currentTime","requestAnimationFrame","RenderManager","save","translate","rotate","restore","InputManager","lastClick","handled","clickedItems","_transformStack","e","rect","getBoundingClientRect","clientX","left","clientY","top","nodeMatrix","matrix","nextMatrix","multiply","mouseToPoint","invert","transferred","transformPoint","bounds","contains","pop","Transform","m","m11","m12","m21","m22","dx","dy","d","m0","m1","m2","m3","m4","m5","rad","Math","cos","s","sin","sx","sy","i","px","py","set","nodeTransform","RectangleBounds","point","TL","Object","freeze","splitTextures","cornerLength","st","northwest","north","northeast","west","center","east","southwest","south","southeast","panel_center_w","panel_center_h","sub","assign","Panel","Error","subtextures","_width","_height","txOffset","nodes","tex","centerScaleW","centerScaleH","GameText","style","font","drawText","gameText","fillStyle","fillText","Button","textures","upNode","downNode","textNode","textStyle"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 699b91678a86957a9c28","class Texture {\n  constructor(\n    name,\n    srcImage,\n    x, y,\n    width, height,\n  ){\n    this.name = name,\n    this.srcImage = srcImage;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n}\n\n// Origin is currently hardcoded to center\nconst drawTexture = (ctx, texture,\n  offset = {x:0.5, y:0.5}) =>{\n  ctx.drawImage(texture.srcImage,\n    texture.x, texture.y,\n    texture.width, texture.height,\n    // we'll mess with this part next :)\n    (-offset.x)*texture.width,\n    (-offset.y)*texture.height,\n    texture.width,\n    texture.height);\n}\n\nexport {Texture, drawTexture};\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/texture.js","const noop = () => {};\n\n// This might be split up into multiple types\nclass SceneNode {\n  constructor(\n    parent,\n    translation = {x:0,y:0},\n    rotation = 0,\n    scale = {x:1,y:1},\n    texture,\n    zIndex,\n    offset = {x:0.5, y: 0.5},\n    visible = true,\n    onclick = null\n  ){\n    // fairly straightforward mapping of nodes\n    this.translation = translation;\n    this.rotation = rotation;\n    this.scale = scale;\n    this.texture = texture;\n    this.zIndex = zIndex;\n\n    // Don't allocate arrays until we need to\n    this.children = null;\n    this.parent = parent;\n    this.visible = visible;\n    if(this.parent != null){\n      this.parent.addChild(this);\n    }\n\n    this.offset = offset;\n\n    // define this later if I need to\n    this.text = undefined;\n    this.onclick = onclick;\n  }\n\n  addChild(node){\n    if(this.children == null){\n      this.children = [];\n    }\n    node.parent = this;\n    this.children.push(node);\n\n    // assign a default zIndex, relatively naive :)\n    if(node.zIndex == null){\n      node.zIndex = this.children.length;\n    } else {\n      // Maybe we need to sort our children?\n      this.children.sort((a,b)=>{return a.zIndex - b.zIndex;})\n    }\n  }\n}\n\nfunction traverseGraph(node, before = noop, after = noop){\n  // we can tell it to stop\n  if(before(node) && node.children){\n    node.children.forEach(child => traverseGraph(child, before, after))\n  }\n  after(node);\n}\n\nexport { SceneNode, traverseGraph };\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/scene_node.js","const noop = () => {}\n\nclass State {\n  constructor(manager){\n    this.manager = manager;\n    this.onEnter = noop;\n    this.onUpdate = noop;  // Function to run during the state\n    this.onExit = noop;\n  }\n}\n\nclass StateManager {\n  constructor(systems){\n    this.systems = systems;\n    this._currentState = new State();\n    this._nextState = null;\n  }\n  setNext(state){\n    state.manager = this;\n    this._nextState = state;\n  }\n  update(){\n    if(this._nextState){\n      this._currentState.onExit();\n      this._nextState.onEnter();\n      this._currentState = this._nextState;\n      this._nextState = null;\n    }\n    this._currentState.onUpdate();\n  }\n}\n\nexport { State, StateManager}\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/state_management.js","const between = (a,b,c) =>{\n  return (a >= b && a <= c) || (a <= b && a >= c);\n}\nconst last = (arr) => {\n  return arr[arr.length-1];\n}\n\nconst noop = () => {};\n\nexport { between, last, noop}\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/utils.js","// Let's draw a couple things from a scene graph\n// import { SceneNode, traverseGraph} from \"./scene_node\"\n// import { Texture, drawTexture } from \"./texture\"\n// import Panel from \"./panel\"\n// import Button from \"./button\"\n// import { between, last} from \"./utils\"\n// import { Transform, nodeTransform} from \"./transform\"\n// const canvas = document.getElementById(\"test\");\n// const ctx = canvas.getContext(\"2d\");\n\n// const rootNode = new SceneNode();\n// loadAtlas(BlueSheet).then((atlas)=>{\n//   rootNode.translation.x = 400;\n//   rootNode.translation.y = 80;\n//   rootNode.rotation = Math.PI/8\n//   const texture = atlas.get(\"blue_button00\");\n//   rootNode.offset = {x:1, y:0};\n//   rootNode.bounds = new RectangleBounds(\n//     texture.width, texture.height, rootNode.offset\n//   );\n//   rootNode.texture = texture;\n//   setInterval(function(){\n//     ui();\n//     update();\n//   },1);\n// });\n\nimport GreySheet from \"../asset_data/grey_sheet.json\"\nimport BlueSheet from \"../asset_data/blue_sheet.json\"\nimport loadAtlas from \"./core/asset_loader\"\nimport {SceneNode} from \"./core/scene_node\"\nimport Engine from \"./engine\"\nimport { State } from \"./core/state_management\"\nimport { RectangleBounds } from \"./core/bounds\"\nimport Panel from \"./panel\"\nimport Button from \"./button\"\nimport { GameText } from \"./core/game_text\"\n\nconst canvas = document.getElementById(\"test\");\nconst engine = new Engine(canvas);\n\nconst loadState = new State();\nconst renderState = new State();\n\nconst newNode = new SceneNode();\nlet panel = null;\nlet text = null;\n\nloadState.onEnter = function(){\n  const me = this;\n  const systems = me.manager.systems;\n  const root = systems.scene_graph;\n  Promise.all([loadAtlas(GreySheet), loadAtlas(BlueSheet)])\n  .then((atlases)=>{\n    const [greyAtlas, blueAtlas] = atlases;\n    const panelTexture = greyAtlas.get(\"grey_panel\");\n    panel = new Panel(panelTexture, 600, 600);\n    root.addChild(panel.node);\n    panel.node.translation.x = 10;\n    panel.node.translation.y = 10;\n\n    const newNode = new SceneNode();\n    newNode.translation.x = 10;\n    newNode.translation.y = 30;\n    newNode.text = new GameText(\"test\", \"blue\", \"30px Arial\")\n    panel.node.addChild(newNode);\n\n    me.manager.setNext(renderState);\n  });\n\n};\n\nloadState.onUpdate = () => {\n  console.log(\"loading\");\n};\n\n\nrenderState.onEnter= () => {\n  console.log(\"drawing\");\n};\n\nrenderState.onUpdate= () => {\n\n};\n\nengine.stateManager.setNext(loadState)\n\nengine.start();\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/main.js","module.exports = {\"TextureAtlas\":{\"imagePath\":\"./assets/ui_sheets/greySheet.png\",\"SubTexture\":[{\"name\":\"grey_arrowDownGrey.png\",\"x\":\"78\",\"y\":\"498\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_arrowDownWhite.png\",\"x\":\"123\",\"y\":\"496\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_arrowUpGrey.png\",\"x\":\"108\",\"y\":\"498\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_arrowUpWhite.png\",\"x\":\"93\",\"y\":\"498\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_box.png\",\"x\":\"147\",\"y\":\"433\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"grey_boxCheckmark.png\",\"x\":\"147\",\"y\":\"469\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"grey_boxCross.png\",\"x\":\"185\",\"y\":\"433\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"grey_boxTick.png\",\"x\":\"190\",\"y\":\"198\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"grey_button00.png\",\"x\":\"0\",\"y\":\"143\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"grey_button01.png\",\"x\":\"0\",\"y\":\"188\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_button02.png\",\"x\":\"0\",\"y\":\"98\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"grey_button03.png\",\"x\":\"0\",\"y\":\"331\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_button04.png\",\"x\":\"0\",\"y\":\"286\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"grey_button05.png\",\"x\":\"0\",\"y\":\"0\",\"width\":\"195\",\"height\":\"49\"},{\"name\":\"grey_button06.png\",\"x\":\"0\",\"y\":\"49\",\"width\":\"191\",\"height\":\"49\"},{\"name\":\"grey_button07.png\",\"x\":\"195\",\"y\":\"0\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button08.png\",\"x\":\"240\",\"y\":\"49\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button09.png\",\"x\":\"98\",\"y\":\"433\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"grey_button10.png\",\"x\":\"191\",\"y\":\"49\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button11.png\",\"x\":\"0\",\"y\":\"433\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"grey_button12.png\",\"x\":\"244\",\"y\":\"0\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button13.png\",\"x\":\"49\",\"y\":\"433\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"grey_button14.png\",\"x\":\"0\",\"y\":\"384\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_button15.png\",\"x\":\"0\",\"y\":\"237\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_checkmarkGrey.png\",\"x\":\"99\",\"y\":\"478\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"grey_checkmarkWhite.png\",\"x\":\"78\",\"y\":\"478\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"grey_circle.png\",\"x\":\"185\",\"y\":\"469\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"grey_crossGrey.png\",\"x\":\"120\",\"y\":\"478\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"grey_crossWhite.png\",\"x\":\"190\",\"y\":\"318\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"grey_panel.png\",\"x\":\"190\",\"y\":\"98\",\"width\":\"100\",\"height\":\"100\"},{\"name\":\"grey_sliderDown.png\",\"x\":\"190\",\"y\":\"234\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"grey_sliderEnd.png\",\"x\":\"138\",\"y\":\"478\",\"width\":\"8\",\"height\":\"10\"},{\"name\":\"grey_sliderHorizontal.png\",\"x\":\"0\",\"y\":\"380\",\"width\":\"190\",\"height\":\"4\"},{\"name\":\"grey_sliderLeft.png\",\"x\":\"0\",\"y\":\"478\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"grey_sliderRight.png\",\"x\":\"39\",\"y\":\"478\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"grey_sliderUp.png\",\"x\":\"190\",\"y\":\"276\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"grey_sliderVertical.png\",\"x\":\"208\",\"y\":\"318\",\"width\":\"4\",\"height\":\"100\"},{\"name\":\"grey_tickGrey.png\",\"x\":\"190\",\"y\":\"336\",\"width\":\"17\",\"height\":\"17\"},{\"name\":\"grey_tickWhite.png\",\"x\":\"190\",\"y\":\"353\",\"width\":\"17\",\"height\":\"17\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/asset_data/grey_sheet.json\n// module id = 5\n// module chunks = 0","import {Texture} from \"./texture\"\n\nclass TextureAtlas {\n  constructor(image, data){\n    this.image = image;\n    this.data = data.TextureAtlas.SubTexture;\n    // TODO: Initialize image references to all of them?\n\n    // Convert each item string value to numbers\n    this.data.forEach((item)=>{\n      item.x = +item.x;\n      item.y = +item.y;\n      item.width = +item.width;\n      item.height = +item.height;\n    });\n  }\n  get(name){\n    // var texture = {};\n    let refTexture = this.data.find((item)=>{\n      return item.name.split(\".\")[0] === name;\n    });\n    console.log(refTexture);\n    let texture = new Texture(\n      refTexture.name,\n      this.image,\n      +refTexture.x,\n      +refTexture.y,\n      +refTexture.width,\n      +refTexture.height\n    )\n    console.log(texture);\n    return texture;\n  }\n}\n\nconst loadAsset = (loadData) => {\n  return new Promise((resolve, reject) => {\n    // Load base image\n    let url = loadData.TextureAtlas.imagePath;\n    let img = new Image();\n    img.onload = () => {\n      resolve(new TextureAtlas(img, loadData))\n    };\n    img.onerror = () => {\n      reject();\n    };\n    img.src = url;\n  });\n};\n\nexport default loadAsset;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/asset_loader.js","import { State, StateManager } from \"./core/state_management\"\nimport { SceneNode, traverseGraph } from \"./core/scene_node\"\nimport { Loop } from \"./core/game_loop\"\nimport { RenderManager } from \"./core/render_management\"\nimport { InputManager } from \"./core/input_management\"\n\n// TODO, introduce loops and register any draws and hits\nclass Engine {\n  constructor(canvas){\n    // We might be able to pluck rendering off of this list\n    this.systems = {\n      input_manager: new InputManager(canvas),\n      render_manager: new RenderManager(canvas.getContext(\"2d\")),\n      scene_graph: new SceneNode(), // ROOT\n      loop: new Loop()\n    };\n    this.stateManager = new StateManager(this.systems);\n    this.systems.loop.onLoop = (stepTime, totalTime) => {\n      // run our traverseGraph rendering algorithm\n      traverseGraph(this.systems.scene_graph,\n        (node) => {\n          //debugger;\n          this.systems.input_manager.onNode(node);\n          this.systems.render_manager.onNode(node);\n          return true;\n        },\n        (node) => {\n          this.systems.render_manager.afterNode(node);\n          this.systems.input_manager.afterNode(node);\n        }\n      );\n\n      // Process given user input\n      this.stateManager.update(stepTime, totalTime);\n\n      this.systems.input_manager.reset();\n    }\n  }\n  start(){\n    this.systems.loop.start();\n  }\n  stop(){\n    this.systems.loop.stop();\n  }\n}\n\nexport default Engine;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/engine.js","// TODO: Create LogicLoop and Animation Loop\n\nfunction getTime(){\n   return window.performance.now();\n}\nconst noop = () => {};\n// uses request animation frame, might split out another loop if necessary\nclass Loop{\n  constructor(onLoop = noop){\n    this.onLoop = onLoop;\n    this.breakLoop = false;\n    this.startTime = getTime();\n    this.lastTime = getTime();\n    this._loop = this._loop.bind(this);\n  }\n  _loop(){\n    // Loop is broken, we are done\n    if(this.breakLoop){\n      return;\n    }\n    const currentTime = getTime();\n    // time since last frame and time since start\n    this.onLoop(currentTime - this.lastTime, currentTime - this.startTime);\n    window.requestAnimationFrame(this._loop);\n    this.lastTime = currentTime;\n  }\n\n  start(){\n    this.breakLoop = false;\n    this._loop();\n    return this;\n  }\n  stop(){\n    this.breakLoop = true;\n    return this;\n  }\n}\n// Maybe add an animation control loop or something, i dunno\n\nexport { Loop }\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/game_loop.js","import { drawTexture } from \"./texture\"\nimport { drawText } from \"./game_text\"\nclass RenderManager {\n  constructor(ctx){\n    this.ctx = ctx; // Canvas 2D context\n  }\n  onNode(node){\n    this.ctx.save();\n    this.ctx.translate(node.translation.x, node.translation.y);\n    this.ctx.rotate(node.rotation);\n    this.ctx.scale(node.scale.x, node.scale.y);\n\n    if(node.visible){\n      if(node.texture){\n        drawTexture(this.ctx, node.texture, node.offset);\n      }\n      if(node.text){\n        drawText(this.ctx, node.text);\n      }\n    }\n\n  }\n  afterNode(node){\n    this.ctx.restore();\n  }\n}\n\nexport { RenderManager }\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/render_management.js","import { Transform, nodeTransform} from \"./transform\"\nimport { between, last} from \"./utils\"\n\nclass InputManager {\n  constructor(canvas){\n    this.lastClick = {\n      x:0,\n      y:0,\n      handled:true\n    }\n    this.clickedItems = [];\n    this._transformStack = [new Transform()];\n\n    canvas.onclick = (e) => {\n      const rect = canvas.getBoundingClientRect()\n      this.lastClick.x = e.clientX - rect.left;\n      this.lastClick.y = e.clientY - rect.top;\n      this.lastClick.handled = false;\n    }\n\n    // We are listening on the canvas\n    this.canvas = canvas;\n    console.log(this._transformStack);\n  }\n  onNode(node){\n    if(this.lastClick.handled){\n      return;\n    }\n    const nodeMatrix = nodeTransform(node);\n    const matrix = last(this._transformStack);\n\n    const nextMatrix = matrix.multiply(nodeMatrix);\n\n    const mouseToPoint = nextMatrix.invert();\n    const transferred = mouseToPoint.transformPoint(this.lastClick.x, this.lastClick.y);\n    //console.log(`You clicked at ${transferred.x}, ${transferred.y}`);\n    if(node.bounds && node.bounds.contains(transferred)){\n      this.clickedItems.push(node);\n      console.log(this.clickedItems);\n    }\n\n    this._transformStack.push(nextMatrix);\n  }\n  afterNode(node){\n    if(this.lastClick.handled){\n      return;\n    }\n    this._transformStack.pop();\n  }\n  reset(){\n    this.lastClick.handled = true;\n    this.clickedItems.length = 0;\n    this._transformStack.length = 0; // remove all except the first\n    this._transformStack.push(new Transform());\n  }\n}\n\nexport { InputManager }\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/input_management.js","\n// TODO: Really understand matrix transforms\nclass Transform {\n  constructor(){\n    this.reset();\n  }\n  reset(){\n    this.m = [1,0,  // m11, m12 0,1 // Scale and rotation\n              0,1,  // m21, m22 2,3\n              0,0]; // dx, dy, 4,5  // Offset\n    return this;\n  }\n  multiply(matrix){\n    const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n    const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n    const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n\n    return this;\n  }\n  invert(){\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[2] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n\n    return this;\n  }\n  // Transformation is in radians\n  rotate(rad){\n    const c = Math.cos(rad);\n    const s = Math.sin(rad);\n    const m11 = this.m[0] * c + this.m[2] * s;\n    const m12 = this.m[1] * c + this.m[3] * s;\n    const m21 = this.m[0] * -s + this.m[2] * c;\n    const m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n\n    return this;\n  }\n  translate(x,y){\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n\n    return this;\n  }\n  scale(sx, sy){\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n\n    return this;\n  }\n  set(matrix){\n    for(var i = 0; i < 6; i++){\n      this.m[i] = matrix.m[i];\n    }\n    return this;\n  }\n\n  // Transform coordinate into current coordinate space\n  transformPoint(px, py){\n    var x = px;\n    var y = py;\n    px = x * this.m[0] + y * this.m[2] + this.m[4];\n    py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return {x:px,y: py};\n  }\n\n  zeroPoint(){\n    return this.transformPoint(0,0);\n  }\n\n  copy(){\n    return new Transform().set(this);\n  }\n\n  print(){\n    console.log(\"\");\n    console.log(`${this.m[0]}, ${this.m[1]}`);\n    console.log(`${this.m[2]}, ${this.m[3]}`);\n    console.log(`${this.m[4]}, ${this.m[5]}`);\n    return this;\n  }\n\n}\n\nconst nodeTransform = (node) => {\n  return new Transform()\n    .translate(node.translation.x,\n               node.translation.y)\n    .rotate(node.rotation)\n    .scale(node.scale.x, node.scale.y);\n};\n\n\n\n\nexport { Transform, nodeTransform };\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/transform.js","import { between } from \"./utils\"\n\nclass RectangleBounds {\n  constructor(width,height,offset, x = 0, y = 0){\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n\n    if(offset){\n      this.x = this.x - offset.x*this.width,\n      this.y = this.y - offset.y * this.height;\n    }\n  }\n  contains(point){\n    return (\n      between(point.x, this.x, this.x + this.width) &&\n      between(point.y, this.y, this.y + this.height)\n    );\n  }\n}\n\n\nexport { RectangleBounds }\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/bounds.js","import {Texture} from \"./core/texture\"\nimport {SceneNode} from \"./core/scene_node\"\n\nconst TL = {\n  x:0,\n  y:0\n};\nObject.freeze(TL);\n\nconst splitTextures = (texture, cornerLength) => {\n  let st = {\n    northwest: {},\n    north: {},\n    northeast: {},\n    west: {},\n    center: {},\n    east: {},\n    southwest: {},\n    south: {},\n    southeast: {}\n  };\n\n  let panel_center_w = texture.width - cornerLength*2;\n  let panel_center_h = texture.height - cornerLength*2;\n\n  console.log(panel_center_w);\n  console.log(panel_center_h);\n\n  for(let sub in st){\n    Object.assign(st[sub], texture);\n  }\n  console.log(st);\n\n  // North Row\n  st.northwest.name += \"_NW\";\n  st.northwest.width = cornerLength;\n  st.northwest.height = cornerLength;\n\n  st.north.name += \"_N\";\n  st.north.width = panel_center_w;\n  st.north.height = cornerLength;\n  st.north.x += cornerLength;\n\n  st.northeast.name += \"_NE\";\n  st.northeast.width = cornerLength;\n  st.northeast.height = cornerLength;\n  st.northeast.x += cornerLength + panel_center_w;\n\n  // Center Row\n  st.west.name += \"_W\";\n  st.west.width = cornerLength;\n  st.west.height = panel_center_h;\n  st.west.y += cornerLength;\n\n  st.center.name += \"_C\";\n  st.center.width = panel_center_w;\n  st.center.height = panel_center_h;\n  st.center.x += cornerLength;\n  st.center.y += cornerLength;\n\n  st.east.name += \"_E\";\n  st.east.width = cornerLength;\n  st.east.height = panel_center_h;\n  st.east.x += cornerLength + panel_center_w;\n  st.east.y += cornerLength;\n\n  st.southwest.name += \"_SW\";\n  st.southwest.width = cornerLength;\n  st.southwest.height = cornerLength;\n\n  st.southwest.y += cornerLength + panel_center_h;\n\n  st.south.name += \"_S\";\n  st.south.width = panel_center_w;\n  st.south.height = cornerLength;\n  st.south.x += cornerLength;\n  st.south.y += cornerLength + panel_center_h;\n\n  st.southeast.name += \"_SE\";\n  st.southeast.width = cornerLength;\n  st.southeast.height = cornerLength;\n  st.southeast.x += cornerLength + panel_center_w;\n  st.southeast.y += cornerLength + panel_center_h;\n\n  return st;\n};\n\nclass Panel {\n  constructor(texture, width, height, cornerLength = 10){\n    // we have a terrible error\n    if(texture == null){\n      throw new Error(\"Panel must have a texture\");\n    }\n\n    this.texture = texture;;\n    this.cornerLength = cornerLength;\n    const subtextures = splitTextures(this.texture, this.cornerLength);\n\n    this.node = new SceneNode();\n    this._width = width;\n    this._height = height;\n\n    let txOffset = {\n      x: subtextures.northwest.x,\n      y: subtextures.northwest.y\n    }\n    const nodes = {};\n    for(let st in subtextures){\n      let node = new SceneNode(this.node);\n      let tex = subtextures[st]\n      node.texture = tex;\n      node.offset = TL;\n      nodes[st] = node;\n      node.visible = false;\n    }\n\n    const centerScaleW = (this._width - cornerLength * 2)/(this.texture.width - cornerLength * 2);\n    const centerScaleH = (this._height - cornerLength * 2)/(this.texture.height - cornerLength * 2);\n\n\n    nodes.northwest.visible = true;\n\n    nodes.north.visible = true;\n    nodes.north.translation.x += cornerLength;\n    nodes.north.scale.x = centerScaleW;\n\n    nodes.northeast.visible = true;\n    nodes.northeast.translation.x += this._width - cornerLength;\n\n    nodes.west.visible = true;\n    nodes.west.translation.y += cornerLength;\n    nodes.west.scale.y = centerScaleH;\n\n    nodes.center.visible = true;\n    nodes.center.translation.x += cornerLength;\n    nodes.center.translation.y += cornerLength;\n    nodes.center.scale.x = centerScaleW;\n    nodes.center.scale.y = centerScaleH;\n\n    nodes.east.visible = true;\n    nodes.east.translation.x += this._width - cornerLength;\n    nodes.east.translation.y += cornerLength;\n    nodes.east.scale.y = centerScaleH;\n\n    nodes.southwest.visible = true;\n    nodes.southwest.translation.y += this._height - cornerLength;\n\n    nodes.south.visible = true;\n    nodes.south.translation.x += cornerLength;\n    nodes.south.translation.y += this._height - cornerLength;\n    nodes.south.scale.x = centerScaleW;\n\n    nodes.southeast.visible = true;\n    nodes.southeast.translation.x += this._width - cornerLength;\n    nodes.southeast.translation.y += this._height - cornerLength;\n\n  }\n\n}\n\nexport default Panel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/panel.js","class GameText {\n  constructor(text, style, font){\n    this.text = text;\n    this.style = style;\n    this.font = font;\n  }\n}\n\nconst drawText = (ctx, gameText) => {\n  ctx.save()\n  ctx.font = gameText.font\n  ctx.fillStyle = gameText.style;\n  ctx.fillText(gameText.text,0,0);\n  ctx.restore();\n}\n\nexport { GameText, drawText }\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/core/game_text.js","module.exports = {\"TextureAtlas\":{\"imagePath\":\"./assets/ui_sheets/blueSheet.png\",\"SubTexture\":[{\"name\":\"blue_boxCheckmark.png\",\"x\":\"380\",\"y\":\"36\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxCross.png\",\"x\":\"380\",\"y\":\"0\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxTick.png\",\"x\":\"386\",\"y\":\"210\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_button00.png\",\"x\":\"0\",\"y\":\"94\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button01.png\",\"x\":\"190\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button02.png\",\"x\":\"190\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button03.png\",\"x\":\"0\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button04.png\",\"x\":\"0\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button05.png\",\"x\":\"0\",\"y\":\"192\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button06.png\",\"x\":\"288\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button07.png\",\"x\":\"239\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button08.png\",\"x\":\"190\",\"y\":\"194\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button09.png\",\"x\":\"339\",\"y\":\"94\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button10.png\",\"x\":\"290\",\"y\":\"94\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button11.png\",\"x\":\"337\",\"y\":\"184\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button12.png\",\"x\":\"290\",\"y\":\"139\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button13.png\",\"x\":\"0\",\"y\":\"143\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_checkmark.png\",\"x\":\"337\",\"y\":\"233\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"blue_circle.png\",\"x\":\"386\",\"y\":\"174\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_cross.png\",\"x\":\"0\",\"y\":\"237\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"blue_panel.png\",\"x\":\"190\",\"y\":\"94\",\"width\":\"100\",\"height\":\"100\"},{\"name\":\"blue_sliderDown.png\",\"x\":\"416\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_sliderLeft.png\",\"x\":\"339\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderRight.png\",\"x\":\"378\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderUp.png\",\"x\":\"388\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_tick.png\",\"x\":\"18\",\"y\":\"239\",\"width\":\"17\",\"height\":\"17\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/asset_data/blue_sheet.json\n// module id = 15\n// module chunks = 0","import {SceneNode} from './core/scene_node'\n\nclass Button {\n  constructor(textures, width, height, onclick){\n    this.node = new SceneNode();\n    this.upNode = new SceneNode(this.node);   // Button Released\n    this.upNode.texture = textures[0];\n    this.downNode = new SceneNode(this.node); // Button Pressed\n    this.downNode.texture = textures[1];\n    this.downNode.visible = false;\n\n    this.width = width;\n    this.height = height;\n\n    this.textNode = new SceneNode(this.node);\n    this.textNode.text = \"test\";\n    this.textNode.textStyle = \"white\"\n    this.textNode.translation.x = -30;\n    this.textNode.translation.y = 10;\n\n  }\n  update(){\n\n  }\n  toggle(){\n    this.upNode.visible = this.downNode.visible;\n    this.downNode.visible = !this.downNode.visible;\n    if(this.upNode.visible){\n      this.textNode.translation.y = 10;\n    } else {\n      this.textNode.translation.y = 12;\n    }\n  }\n}\n\nexport default Button;\n\n\n\n// WEBPACK FOOTER //\n// ./js/engine/button.js"],"sourceRoot":""}