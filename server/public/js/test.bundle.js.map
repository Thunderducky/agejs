{"version":3,"sources":["webpack:///webpack/bootstrap c72e13777f5715c87bf1","webpack:///./client/js/engine/core/scene_node.js","webpack:///./client/js/engine/core/utils.js","webpack:///./client/js/engine/core/transform.js","webpack:///./client/js/engine/test.js"],"names":["noop","SceneNode","parent","translation","x","y","rotation","scale","texture","zIndex","offset","visible","onclick","children","addChild","text","undefined","node","push","length","sort","a","b","traverseGraph","before","after","forEach","child","between","c","last","arr","Transform","reset","m","matrix","m11","m12","m21","m22","dx","dy","d","m0","m1","m2","m3","m4","m5","rad","Math","cos","s","sin","sx","sy","i","px","py","transformPoint","set","approx","number","toFixed","printTransform","t","console","log","nodeTransform","transform","copy","translate","rotate","root","id","PI","transformStack","graph","inv","invert","point","pop","printNode","canvas","document","getElementById","onmousemove","e"],"mappings":"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","file":"test.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c72e13777f5715c87bf1","const noop = () => {};\n\n// This might be split up into multiple types\nclass SceneNode {\n  constructor(\n    parent,\n    translation = {x:0,y:0},\n    rotation = 0,\n    scale = {x:1,y:1},\n    texture,\n    zIndex,\n    offset = {x:0.5, y: 0.5},\n    visible = true,\n    onclick = null\n  ){\n    // fairly straightforward mapping of nodes\n    this.translation = translation;\n    this.rotation = rotation;\n    this.scale = scale;\n    this.texture = texture;\n    this.zIndex = zIndex;\n\n    // Don't allocate arrays until we need to\n    this.children = null;\n    this.parent = parent;\n    this.visible = visible;\n    if(this.parent != null){\n      this.parent.addChild(this);\n    }\n\n    this.offset = offset;\n\n    // define this later if I need to\n    this.text = undefined;\n    this.onclick = onclick;\n  }\n\n  addChild(node){\n    if(this.children == null){\n      this.children = [];\n    }\n    node.parent = this;\n    this.children.push(node);\n\n    // assign a default zIndex, relatively naive :)\n    if(node.zIndex == null){\n      node.zIndex = this.children.length;\n    } else {\n      // Maybe we need to sort our children?\n      this.children.sort((a,b)=>{return a.zIndex - b.zIndex;})\n    }\n  }\n}\n\n// SceneNodes can HAVE Clickable, Texture, Text, etc\n\nfunction traverseGraph(node, before = noop, after = noop){\n  // we can tell it to stop\n  if(before(node) && node.children){\n    node.children.forEach(child => traverseGraph(child, before, after))\n  }\n  after(node);\n}\n\nexport { SceneNode, traverseGraph };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/scene_node.js","const between = (a,b,c) =>{\n  return (a >= b && a <= c) || (a <= b && a >= c);\n}\nconst last = (arr) => {\n  return arr[arr.length-1];\n}\n\nconst noop = () => {};\n\nexport { between, last, noop}\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/utils.js","\n// TODO: Really understand matrix transforms\nclass Transform {\n  constructor(){\n    this.reset();\n  }\n  reset(){\n    this.m = [1,0,  // m11, m12 0,1 // Scale and rotation\n              0,1,  // m21, m22 2,3\n              0,0]; // dx, dy, 4,5  // Offset\n    return this;\n  }\n  multiply(matrix){\n    const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n    const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n    const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n\n    return this;\n  }\n  invert(){\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[2] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n\n    return this;\n  }\n  // Transformation is in radians\n  rotate(rad){\n    const c = Math.cos(rad);\n    const s = Math.sin(rad);\n    const m11 = this.m[0] * c + this.m[2] * s;\n    const m12 = this.m[1] * c + this.m[3] * s;\n    const m21 = this.m[0] * -s + this.m[2] * c;\n    const m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n\n    return this;\n  }\n  translate(x,y){\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n\n    return this;\n  }\n  scale(sx, sy){\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n\n    return this;\n  }\n  set(matrix){\n    for(var i = 0; i < 6; i++){\n      this.m[i] = matrix.m[i];\n    }\n    return this;\n  }\n\n  // Transform coordinate into current coordinate space\n  transformPoint(px, py){\n    var x = px;\n    var y = py;\n    px = x * this.m[0] + y * this.m[2] + this.m[4];\n    py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return {x:px,y: py};\n  }\n\n  zeroPoint(){\n    return this.transformPoint(0,0);\n  }\n\n  copy(){\n    return new Transform().set(this);\n  }\n\n}\n\nconst approx = (number) => {\n  return number.toFixed(2);\n  // return Math.abs(number) < 0.0000000001\n  //   ? \"~0\"\n  //   : number\n\n}\n\nfunction printTransform(t){\n  console.log(`\n    [ ${approx(t.m[0])}, ${approx(t.m[1])}\n      ${approx(t.m[2])}, ${approx(t.m[3])}\n      ${approx(t.m[4])}, ${approx(t.m[5])} ]\n  `);\n  return this;\n}\n\nconst nodeTransform = (node, transform = new Transform()) => {\n  return transform.copy()\n    .translate(node.translation.x,\n               node.translation.y)\n    .rotate(node.rotation)\n    .scale(node.scale.x, node.scale.y);\n};\n\n\n\n\nexport { Transform, nodeTransform, printTransform };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/transform.js","/*\n  Our traversal, transform seems to be running into issues, so we're going to iron out the kinks\n  we're going to start with translation and work on it from there\n*/\nimport { SceneNode, traverseGraph } from \"./core/scene_node\"\nimport { Transform, nodeTransform, printTransform} from \"./core/transform\"\nimport { last } from \"./core/utils\"\nconst root = new SceneNode();\nroot.id = \"root\";\nroot.translation.x = 100;\nroot.translation.y = 100;\nroot.rotation = Math.PI/2;\n//root.scale.x = 2;\n//root.scale.y = 2;\n// const child = new SceneNode(root);\n// child.id = \"child\";\n// child.translation.x = 10;\n// child.translation.y = 10;\n// const child2 = new SceneNode(root);\n// child2.id = \"child2\";\n// const grandchild = new SceneNode(child);\n// grandchild.id = \"grandchild\";\n\n// Let's build our transformation network, woo!\n\nconst transformStack = [];\ntransformStack.push(new Transform());\n\nfunction graph(){\ntraverseGraph(root, (node)=>{\n  // printNode(node);\n  let t = nodeTransform(node, last(transformStack));\n  // printTransform(t);\n  // console.log(\"inverse\");\n  // printTransform(t.invert())\n  transformStack.push(t);\n  if(node.id == \"root\"){\n    const inv = t.invert();\n    const point = inv.transformPoint(x, y);\n    console.log(`\n        Inverse of ${x},${y}:\n        ${point.x}, ${point.y}\n      `)\n    printTransform(inv);\n  }\n  return true;\n}, (node) => {\n  //printNode(node);\n  transformStack.pop();\n});\n}\n\n\nconst transform = new Transform();\n\nfunction printNode(node){\n  console.log(\n    `\n      node: ${node.id}\n      translation: ${node.translation.x}, ${node.translation.y}\n      rotation: ${node.rotation} radians\n      scale: ${node.scale.x}, ${node.scale.y}\n    `\n  )\n}\nlet x = 0;\nlet y = 0;\nconst canvas = document.getElementById(\"test\");\ncanvas.onmousemove = function(e){\n  x = e.x;\n  y = e.y;\n}\n\ncanvas.onclick = function(e){\n  console.log(x, y);\n  graph();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/test.js"],"sourceRoot":""}