{"version":3,"sources":["webpack:///webpack/bootstrap 5c8c0ddd1a2649fe88c6","webpack:///./client/js/engine/core/scene_node.js","webpack:///./client/js/engine/core/game_text.js","webpack:///./client/js/engine/core/texture.js","webpack:///./client/js/engine/core/state_management.js","webpack:///./client/js/engine/core/utils.js","webpack:///./client/js/engine/core/transform.js","webpack:///./client/js/engine/test.js","webpack:///./client/js/asset_data/grey_sheet.json","webpack:///./client/js/asset_data/blue_sheet.json","webpack:///./client/js/engine/core/asset_loader.js","webpack:///./client/js/engine/engine.js","webpack:///./client/js/engine/core/game_loop.js","webpack:///./client/js/engine/core/render_management.js","webpack:///./client/js/engine/core/input_management.js","webpack:///./client/js/engine/core/timer_management.js","webpack:///./client/js/engine/core/bounds.js","webpack:///./client/js/engine/main.js","webpack:///./client/js/engine/core/monitor.js","webpack:///./client/js/engine/ui/button.js","webpack:///./client/js/engine/ui/panel.js","webpack:///./client/js/engine/ui/label.js","webpack:///./client/js/engine/ui/checkbox.js"],"names":["noop","SceneNode","parent","translation","x","y","rotation","scale","texture","zIndex","offset","visible","onclick","children","addChild","text","undefined","node","push","length","sort","a","b","traverseGraph","before","after","forEach","child","GameText","align","style","font","drawText","ctx","gameText","save","fillStyle","textAlign","fillText","restore","Texture","name","srcImage","width","height","drawTexture","drawImage","State","manager","onEnter","onUpdate","onExit","StateManager","systems","_currentState","_nextState","state","stepTime","totalTime","between","c","last","arr","Transform","reset","m","matrix","m11","m12","m21","m22","dx","dy","d","m0","m1","m2","m3","m4","m5","rad","Math","cos","s","sin","sx","sy","i","px","py","transformPoint","set","approx","number","toFixed","printTransform","t","console","log","transformToString","nodeTransform","transform","copy","translate","rotate","canvas","document","getElementById","engine","atlases","createLoadState","nextState","cb","loadState","me","Promise","all","then","setNext","buildAndRun","stateManager","start","TextureAtlas","image","data","SubTexture","item","refTexture","find","split","loadAsset","loadData","resolve","reject","url","imagePath","img","Image","onload","onerror","src","once","Engine","timer_manager","input_manager","render_manager","scene_graph","loop","onLoop","clear","onNode","afterNode","processInput","update","stop","getTime","window","performance","now","Loop","breakLoop","startTime","lastTime","_loop","bind","currentTime","requestAnimationFrame","RenderManager","getContext","clearRect","InputManager","lastClick","handled","mousePosition","clickedItems","_transformStack","e","rect","getBoundingClientRect","clientX","left","clientY","top","onmousemove","nodeMatrix","multiply","mouseToPoint","invert","transferred","bounds","contains","id","pop","Timer","endTime","onDone","isDone","overStep","relativeTime","TimerManager","timers","timer","resolveTimers","filter","time","RectangleBounds","point","test","tex1","tex2","panelTex","label","check1","check2","_atlases","greyAtlas","blueAtlas","get","button","panel","checkbox","updateList","root","init","oncheck","onuncheck","onpress","textNode","onrelease","mouseMonitor","mp","clickMonitor","lc","buttonMonitor","pressed","concat","entry","Monitor","target","stringer","parentNode","toString","gameTime","Button","releasedNode","pressedNode","_tm","_t","depressDistance","texture1","texture2","press","delay","addTimerRelative","release","TL","Object","freeze","splitTextures","cornerLength","st","northwest","north","northeast","west","center","east","southwest","south","southeast","panel_center_w","panel_center_h","sub","assign","Panel","Error","subtextures","_width","_height","txOffset","nodes","tex","centerScaleW","centerScaleH","Label","Checkbox","checked","_texChecked","_texUnchecked","texChecked","texUnchecked","toggle","uncheck","check"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5c8c0ddd1a2649fe88c6","const noop = () => {};\n\n// This might be split up into multiple types\nclass SceneNode {\n  constructor(\n    parent,\n    translation = {x:0,y:0},\n    rotation = 0,\n    scale = {x:1,y:1},\n    texture,\n    zIndex,\n    offset = {x:0.5, y: 0.5},\n    visible = true,\n    onclick = null\n  ){\n    // fairly straightforward mapping of nodes\n    this.translation = translation;\n    this.rotation = rotation;\n    this.scale = scale;\n    this.texture = texture;\n    this.zIndex = zIndex;\n\n    // Don't allocate arrays until we need to\n    this.children = null;\n    this.parent = parent;\n    this.visible = visible;\n    if(this.parent != null){\n      this.parent.addChild(this);\n    }\n\n    this.offset = offset;\n\n    // define this later if I need to\n    this.text = undefined;\n    this.onclick = onclick;\n  }\n\n  addChild(node){\n    if(this.children == null){\n      this.children = [];\n    }\n    node.parent = this;\n    this.children.push(node);\n\n    // assign a default zIndex, relatively naive :)\n    if(node.zIndex == null){\n      node.zIndex = this.children.length;\n    } else {\n      // Maybe we need to sort our children?\n      this.children.sort((a,b)=>{return a.zIndex - b.zIndex;})\n    }\n  }\n}\n\n// SceneNodes can HAVE Clickable, Texture, Text, etc\n\nfunction traverseGraph(node, before = noop, after = noop){\n  // we can tell it to stop\n  if(before(node) && node.children){\n    node.children.forEach(child => traverseGraph(child, before, after))\n  }\n  after(node);\n}\n\nexport { SceneNode, traverseGraph };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/scene_node.js","class GameText {\n  constructor(text, align = \"start\", style = \"white\", font = \"16px 'Space Mono'\"){\n    this.text = text;\n    this.style = style;\n    this.font = font ;\n    this.align = align;\n  }\n}\n\nconst drawText = (ctx, gameText) => {\n  ctx.save()\n  ctx.font = gameText.font || ctx.font;\n  ctx.fillStyle = gameText.style || ctx.fillStyle;\n  ctx.textAlign = gameText.align;\n  ctx.fillText(gameText.text,0,0);\n  ctx.restore();\n}\n\nexport { GameText, drawText }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/game_text.js","class Texture {\n  constructor(\n    name,\n    srcImage,\n    x, y,\n    width, height,\n  ){\n    this.name = name,\n    this.srcImage = srcImage;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n}\n\n// Origin is currently hardcoded to center\nconst drawTexture = (ctx, texture,\n  offset = {x:0.5, y:0.5}) =>{\n  ctx.drawImage(texture.srcImage,\n    texture.x, texture.y,\n    texture.width, texture.height,\n    // we'll mess with this part next :)\n    (-offset.x)*texture.width,\n    (-offset.y)*texture.height,\n    texture.width,\n    texture.height);\n}\n\nexport {Texture, drawTexture};\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/texture.js","const noop = () => {}\n\nclass State {\n  constructor(manager){\n    this.manager = manager;\n    this.onEnter = noop;\n    this.onUpdate = noop;  // Function to run during the state\n    this.onExit = noop;\n  }\n}\n\nclass StateManager {\n  constructor(systems){\n    this.systems = systems;\n    this._currentState = new State();\n    this._nextState = null;\n  }\n  setNext(state){\n    state.manager = this;\n    this._nextState = state;\n  }\n  update(stepTime, totalTime){\n    if(this._nextState){\n      this._currentState.onExit(stepTime, totalTime);\n      this._nextState.onEnter(stepTime, totalTime);\n      this._currentState = this._nextState;\n      this._nextState = null;\n    }\n    this._currentState.onUpdate(stepTime, totalTime);\n  }\n}\n\nexport { State, StateManager}\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/state_management.js","const between = (a,b,c) =>{\n  return (a >= b && a <= c) || (a <= b && a >= c);\n}\n\nconst last = (arr) => {\n  return arr[arr.length-1];\n}\n\nconst noop = () => {};\n\nexport { between, last, noop}\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/utils.js","\n// TODO: Really understand matrix transforms\nclass Transform {\n  constructor(){\n    this.reset();\n  }\n  reset(){\n    this.m = [1,0,  // m11, m12 0,1 // Scale and rotation\n              0,1,  // m21, m22 2,3\n              0,0]; // dx, dy, 4,5  // Offset\n    return this;\n  }\n  multiply(matrix){\n    const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n    const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n    const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n\n    return this;\n  }\n  invert(){\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[2] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n\n    return this;\n  }\n  // Transformation is in radians\n  rotate(rad){\n    const c = Math.cos(rad);\n    const s = Math.sin(rad);\n    const m11 = this.m[0] * c + this.m[2] * s;\n    const m12 = this.m[1] * c + this.m[3] * s;\n    const m21 = this.m[0] * -s + this.m[2] * c;\n    const m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n\n    return this;\n  }\n  translate(x,y){\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n\n    return this;\n  }\n  scale(sx, sy){\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n\n    return this;\n  }\n  set(matrix){\n    for(var i = 0; i < 6; i++){\n      this.m[i] = matrix.m[i];\n    }\n    return this;\n  }\n\n  // Transform coordinate into current coordinate space\n  transformPoint(px, py){\n    var x = px;\n    var y = py;\n    px = x * this.m[0] + y * this.m[2] + this.m[4];\n    py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return {x:px,y: py};\n  }\n\n  zeroPoint(){\n    return this.transformPoint(0,0);\n  }\n\n  copy(){\n    return new Transform().set(this);\n  }\n\n}\n\nconst approx = (number) => {\n  return number.toFixed(2);\n  // return Math.abs(number) < 0.0000000001\n  //   ? \"~0\"\n  //   : number\n\n}\n\nfunction printTransform(t){\n  console.log(transformToString(t));\n}\n\nfunction transformToString(t){\n  return `\n    [ ${approx(t.m[0])}, ${approx(t.m[1])}\n      ${approx(t.m[2])}, ${approx(t.m[3])}\n      ${approx(t.m[4])}, ${approx(t.m[5])} ]\n  `;\n}\n\nconst nodeTransform = (node, transform = new Transform()) => {\n  return transform.copy()\n    .translate(node.translation.x,\n               node.translation.y)\n    .rotate(node.rotation)\n    .scale(node.scale.x, node.scale.y);\n};\n\n\n\n\nexport { Transform, nodeTransform, printTransform, transformToString };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/transform.js","// Initialize JS Engine with normal loads, and pass along the texture atlas\n// if necessary\nimport GreySheet from \"../asset_data/grey_sheet.json\"\nimport BlueSheet from \"../asset_data/blue_sheet.json\"\n\nimport { loadAsset } from \"./core/asset_loader\"\n// import { SceneNode } from \"./core/scene_node\"\nimport { Engine } from \"./engine\"\nimport { State } from \"./core/state_management\"\n// import { RectangleBounds } from \"./core/bounds\"\n// import { Panel } from \"./panel\"\n// import { Button } from \"./button\"\n// import { GameText } from \"./core/game_text\"\n\n\nconst canvas = document.getElementById(\"test\");\nconst engine = new Engine(canvas);\nlet atlases;\n\nfunction createLoadState(nextState,cb){\n  const loadState = new State();\n  loadState.onEnter = function(){\n    var me = this;\n    Promise.all([\n      loadAsset(GreySheet),\n      loadAsset(BlueSheet)\n    ]).then((atlases) => {\n      console.log(\"woo\");\n      cb(atlases);\n      console.log(me);\n      me.manager.setNext(nextState);\n    });\n  }\n  return loadState;\n}\n\nfunction buildAndRun(\n  nextState,\n  cb = (atlases) => {\n    console.log(\"Loaded\")\n  }\n){\n  const loadState = createLoadState(nextState,cb);\n  engine.stateManager.setNext(loadState)\n  engine.start();\n}\n\nexport { buildAndRun, createLoadState }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/test.js","module.exports = {\"TextureAtlas\":{\"imagePath\":\"../assets/ui_sheets/greySheet.png\",\"SubTexture\":[{\"name\":\"grey_arrowDownGrey.png\",\"x\":\"78\",\"y\":\"498\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_arrowDownWhite.png\",\"x\":\"123\",\"y\":\"496\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_arrowUpGrey.png\",\"x\":\"108\",\"y\":\"498\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_arrowUpWhite.png\",\"x\":\"93\",\"y\":\"498\",\"width\":\"15\",\"height\":\"10\"},{\"name\":\"grey_box.png\",\"x\":\"147\",\"y\":\"433\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"grey_boxCheckmark.png\",\"x\":\"147\",\"y\":\"469\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"grey_boxCross.png\",\"x\":\"185\",\"y\":\"433\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"grey_boxTick.png\",\"x\":\"190\",\"y\":\"198\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"grey_button00.png\",\"x\":\"0\",\"y\":\"143\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"grey_button01.png\",\"x\":\"0\",\"y\":\"188\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_button02.png\",\"x\":\"0\",\"y\":\"98\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"grey_button03.png\",\"x\":\"0\",\"y\":\"331\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_button04.png\",\"x\":\"0\",\"y\":\"286\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"grey_button05.png\",\"x\":\"0\",\"y\":\"0\",\"width\":\"195\",\"height\":\"49\"},{\"name\":\"grey_button06.png\",\"x\":\"0\",\"y\":\"49\",\"width\":\"191\",\"height\":\"49\"},{\"name\":\"grey_button07.png\",\"x\":\"195\",\"y\":\"0\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button08.png\",\"x\":\"240\",\"y\":\"49\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button09.png\",\"x\":\"98\",\"y\":\"433\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"grey_button10.png\",\"x\":\"191\",\"y\":\"49\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button11.png\",\"x\":\"0\",\"y\":\"433\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"grey_button12.png\",\"x\":\"244\",\"y\":\"0\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"grey_button13.png\",\"x\":\"49\",\"y\":\"433\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"grey_button14.png\",\"x\":\"0\",\"y\":\"384\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_button15.png\",\"x\":\"0\",\"y\":\"237\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"grey_checkmarkGrey.png\",\"x\":\"99\",\"y\":\"478\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"grey_checkmarkWhite.png\",\"x\":\"78\",\"y\":\"478\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"grey_circle.png\",\"x\":\"185\",\"y\":\"469\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"grey_crossGrey.png\",\"x\":\"120\",\"y\":\"478\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"grey_crossWhite.png\",\"x\":\"190\",\"y\":\"318\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"grey_panel.png\",\"x\":\"190\",\"y\":\"98\",\"width\":\"100\",\"height\":\"100\"},{\"name\":\"grey_sliderDown.png\",\"x\":\"190\",\"y\":\"234\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"grey_sliderEnd.png\",\"x\":\"138\",\"y\":\"478\",\"width\":\"8\",\"height\":\"10\"},{\"name\":\"grey_sliderHorizontal.png\",\"x\":\"0\",\"y\":\"380\",\"width\":\"190\",\"height\":\"4\"},{\"name\":\"grey_sliderLeft.png\",\"x\":\"0\",\"y\":\"478\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"grey_sliderRight.png\",\"x\":\"39\",\"y\":\"478\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"grey_sliderUp.png\",\"x\":\"190\",\"y\":\"276\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"grey_sliderVertical.png\",\"x\":\"208\",\"y\":\"318\",\"width\":\"4\",\"height\":\"100\"},{\"name\":\"grey_tickGrey.png\",\"x\":\"190\",\"y\":\"336\",\"width\":\"17\",\"height\":\"17\"},{\"name\":\"grey_tickWhite.png\",\"x\":\"190\",\"y\":\"353\",\"width\":\"17\",\"height\":\"17\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/js/asset_data/grey_sheet.json\n// module id = 7\n// module chunks = 0 1","module.exports = {\"TextureAtlas\":{\"imagePath\":\"../assets/ui_sheets/blueSheet.png\",\"SubTexture\":[{\"name\":\"blue_boxCheckmark.png\",\"x\":\"380\",\"y\":\"36\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxCross.png\",\"x\":\"380\",\"y\":\"0\",\"width\":\"38\",\"height\":\"36\"},{\"name\":\"blue_boxTick.png\",\"x\":\"386\",\"y\":\"210\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_button00.png\",\"x\":\"0\",\"y\":\"94\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button01.png\",\"x\":\"190\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button02.png\",\"x\":\"190\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button03.png\",\"x\":\"0\",\"y\":\"49\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button04.png\",\"x\":\"0\",\"y\":\"0\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_button05.png\",\"x\":\"0\",\"y\":\"192\",\"width\":\"190\",\"height\":\"45\"},{\"name\":\"blue_button06.png\",\"x\":\"288\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button07.png\",\"x\":\"239\",\"y\":\"194\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button08.png\",\"x\":\"190\",\"y\":\"194\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button09.png\",\"x\":\"339\",\"y\":\"94\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button10.png\",\"x\":\"290\",\"y\":\"94\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button11.png\",\"x\":\"337\",\"y\":\"184\",\"width\":\"49\",\"height\":\"49\"},{\"name\":\"blue_button12.png\",\"x\":\"290\",\"y\":\"139\",\"width\":\"49\",\"height\":\"45\"},{\"name\":\"blue_button13.png\",\"x\":\"0\",\"y\":\"143\",\"width\":\"190\",\"height\":\"49\"},{\"name\":\"blue_checkmark.png\",\"x\":\"337\",\"y\":\"233\",\"width\":\"21\",\"height\":\"20\"},{\"name\":\"blue_circle.png\",\"x\":\"386\",\"y\":\"174\",\"width\":\"36\",\"height\":\"36\"},{\"name\":\"blue_cross.png\",\"x\":\"0\",\"y\":\"237\",\"width\":\"18\",\"height\":\"18\"},{\"name\":\"blue_panel.png\",\"x\":\"190\",\"y\":\"94\",\"width\":\"100\",\"height\":\"100\"},{\"name\":\"blue_sliderDown.png\",\"x\":\"416\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_sliderLeft.png\",\"x\":\"339\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderRight.png\",\"x\":\"378\",\"y\":\"143\",\"width\":\"39\",\"height\":\"31\"},{\"name\":\"blue_sliderUp.png\",\"x\":\"388\",\"y\":\"72\",\"width\":\"28\",\"height\":\"42\"},{\"name\":\"blue_tick.png\",\"x\":\"18\",\"y\":\"239\",\"width\":\"17\",\"height\":\"17\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/js/asset_data/blue_sheet.json\n// module id = 8\n// module chunks = 0 1","import {Texture} from \"./texture\"\n\nclass TextureAtlas {\n  constructor(image, data){\n    this.image = image;\n    this.data = data.TextureAtlas.SubTexture;\n    // TODO: Initialize image references to all of them?\n\n    // Convert each item string value to numbers\n    this.data.forEach((item)=>{\n      item.x = +item.x;\n      item.y = +item.y;\n      item.width = +item.width;\n      item.height = +item.height;\n    });\n  }\n  get(name){\n    // var texture = {};\n    let refTexture = this.data.find((item)=>{\n      return item.name.split(\".\")[0] === name;\n    });\n    console.log(refTexture);\n    let texture = new Texture(\n      refTexture.name,\n      this.image,\n      +refTexture.x,\n      +refTexture.y,\n      +refTexture.width,\n      +refTexture.height\n    )\n    console.log(texture);\n    return texture;\n  }\n}\n\nconst loadAsset = (loadData) => {\n  return new Promise((resolve, reject) => {\n    // Load base image\n    let url = loadData.TextureAtlas.imagePath;\n    let img = new Image();\n    img.onload = () => {\n      resolve(new TextureAtlas(img, loadData))\n    };\n    img.onerror = () => {\n      reject();\n    };\n    img.src = url;\n  });\n};\n\nexport { TextureAtlas, loadAsset };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/asset_loader.js","import { State, StateManager } from \"./core/state_management\"\nimport { SceneNode, traverseGraph } from \"./core/scene_node\"\nimport { Loop } from \"./core/game_loop\"\nimport { RenderManager } from \"./core/render_management\"\nimport { InputManager } from \"./core/input_management\"\nimport { TimerManager } from \"./core/timer_management\"\n// TODO, introduce loops and register any draws and hits\n\nlet once = true;;\n\nclass Engine {\n  constructor(canvas){\n    // We might be able to pluck rendering off of this list\n    this.systems = {\n      timer_manager: new TimerManager(),\n      input_manager: new InputManager(canvas),\n      render_manager: new RenderManager(canvas),\n      scene_graph: new SceneNode(), // ROOT\n      loop: new Loop()\n    };\n    this.stateManager = new StateManager(this.systems);\n    this.systems.loop.onLoop = (stepTime, totalTime) => {\n      // run our traverseGraph rendering algorithm\n      this.systems.render_manager.clear();\n      traverseGraph(this.systems.scene_graph,\n        (node) => {\n          //debugger;\n          this.systems.input_manager.onNode(node);\n          this.systems.render_manager.onNode(node);\n          return true;\n        },\n        (node) => {\n          this.systems.render_manager.afterNode(node);\n          this.systems.input_manager.afterNode(node);\n        }\n      );\n\n      // Process given user input\n      this.systems.input_manager.processInput();\n      this.systems.timer_manager.update(stepTime, totalTime);\n      this.stateManager.update(stepTime, totalTime);\n\n      this.systems.input_manager.reset();\n    }\n  }\n  start(){\n    this.systems.loop.start();\n  }\n  stop(){\n    this.systems.loop.stop();\n  }\n}\n\nexport { Engine };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/engine.js","// TODO: Create LogicLoop and Animation Loop\n\nfunction getTime(){\n   return window.performance.now();\n}\nconst noop = () => {};\n// uses request animation frame, might split out another loop if necessary\nclass Loop{\n  constructor(onLoop = noop){\n    this.onLoop = onLoop;\n    this.breakLoop = false;\n    this.startTime = getTime();\n    this.lastTime = getTime();\n    this._loop = this._loop.bind(this);\n  }\n  _loop(){\n    // Loop is broken, we are done\n    if(this.breakLoop){\n      return;\n    }\n    const currentTime = getTime();\n    // time since last frame and time since start\n    this.onLoop(currentTime - this.lastTime, currentTime - this.startTime);\n    window.requestAnimationFrame(this._loop);\n    this.lastTime = currentTime;\n  }\n\n  start(){\n    this.breakLoop = false;\n    this._loop();\n    return this;\n  }\n  stop(){\n    this.breakLoop = true;\n    return this;\n  }\n}\n// Maybe add an animation control loop or something, i dunno\n\nexport { Loop }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/game_loop.js","import { drawTexture } from \"./texture\"\nimport { drawText } from \"./game_text\"\n\nclass RenderManager {\n  constructor(canvas){\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\"); // Canvas 2D context\n  }\n  onNode(node){\n    this.ctx.save();\n    this.ctx.translate(node.translation.x, node.translation.y);\n    this.ctx.rotate(node.rotation);\n    this.ctx.scale(node.scale.x, node.scale.y);\n\n    if(node.visible){\n      if(node.texture){\n        drawTexture(this.ctx, node.texture, node.offset);\n      }\n      if(node.text){\n        drawText(this.ctx, node.text);\n      }\n    }\n\n  }\n  afterNode(node){\n    this.ctx.restore();\n  }\n  clear(){\n    this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height)\n  }\n}\n\nexport { RenderManager }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/render_management.js","import { Transform, nodeTransform} from \"./transform\"\nimport { between, last} from \"./utils\"\n\nclass InputManager {\n  constructor(canvas){\n    this.lastClick = {\n      x:0,\n      y:0,\n      handled:true\n    },\n    this.mousePosition = {\n      x:0,\n      y:0\n    }\n    this.clickedItems = [];\n    this._transformStack = [new Transform()];\n\n    canvas.onclick = (e) => {\n      const rect = canvas.getBoundingClientRect()\n      this.lastClick.x = e.clientX - rect.left;\n      this.lastClick.y = e.clientY - rect.top;\n      this.lastClick.handled = false;\n    }\n    canvas.onmousemove = (e) => {\n      const rect = canvas.getBoundingClientRect()\n      this.mousePosition.x = e.clientX - rect.left;\n      this.mousePosition.y = e.clientY - rect.top;\n    }\n\n    // We are listening on the canvas\n    this.canvas = canvas;\n    //console.log(this._transformStack);\n  }\n  onNode(node){\n    if(this.lastClick.handled){\n      return;\n    }\n    const nodeMatrix = nodeTransform(node);\n    // We need to make copies and not invert them\n    const matrix =\n      last(this._transformStack)\n        .copy()\n        .multiply(nodeMatrix);\n\n    const mouseToPoint = matrix.copy().invert();\n    const transferred = mouseToPoint.transformPoint(this.lastClick.x, this.lastClick.y);\n\n\n\n    if(node.bounds && node.bounds.contains(transferred)){\n      this.clickedItems.push(node);\n    }\n\n    if(node.id == \"test\"){\n      console.log(transferred);\n      console.log(this.clickedItems);\n    }\n\n\n\n    this._transformStack.push(matrix);\n  }\n  afterNode(node){\n    if(this.lastClick.handled){\n      return;\n    }\n    this._transformStack.pop();\n  }\n\n  processInput(){\n    while(this.clickedItems.length > 0){\n      const item = this.clickedItems.pop();\n      if(item.onclick && !item.onclick()){\n        break;\n      }\n    }\n    this.clickedItems.length = 0;\n  }\n\n  reset(){\n    this.lastClick.handled = true;\n    this.clickedItems.length = 0;\n    this._transformStack.length = 0; // remove all except the first\n    this._transformStack.push(new Transform());\n  }\n}\n\nexport { InputManager }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/input_management.js","class Timer {\n  constructor(endTime, onDone){\n    this.endTime = endTime;\n    this.onDone = onDone;\n    this.isDone = false;\n    this.overStep = 0;\n  }\n  delay(relativeTime){\n    this.endTime += relativeTime;\n  }\n  update(totalTime){\n    if(this.isDone){\n      return;\n    }\n    if(totalTime >= this.endTime){\n      this.overStep = totalTime - this.endTime;\n      this.isDone = true;\n    }\n  }\n}\n\nclass TimerManager {\n  constructor(currentTime = window.performance.now()){\n    this.timers = [];\n    this.lastTime = currentTime;\n  }\n\n  update(stepTime, totalTime){\n    this.timers.forEach(timer => timer.update(totalTime))\n    const resolveTimers = this.timers.filter(timer => timer.isDone);\n    this.timers = this.timers.filter(timer => !timer.isDone);\n\n    // This guarantees timer order\n    resolveTimers.sort((a,b,) => a.endTime - b.endTime);\n    resolveTimers.forEach(timer => timer.onDone(timer.overStep));\n\n    this.lastTime = totalTime;\n  }\n\n  addTimerRelative(time, cb){\n    const t = new Timer(this.lastTime + time, cb);\n    this.timers.push(t);\n    return t;\n  }\n\n  addTimerAbsolute(time){\n    const t = new Timer(time, cb)\n    this.timers.push(t);\n    return t;\n  }\n}\n\nexport { Timer, TimerManager }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/timer_management.js","import { between } from \"./utils\"\n\nclass RectangleBounds {\n  constructor(width,height,offset, x = 0, y = 0){\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n\n    if(offset){\n      this.x = this.x - offset.x*this.width,\n      this.y = this.y - offset.y * this.height;\n    }\n  }\n  contains(point){\n    return (\n      between(point.x, this.x, this.x + this.width) &&\n      between(point.y, this.y, this.y + this.height)\n    );\n  }\n}\n\n\nexport { RectangleBounds }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/bounds.js","import { buildAndRun } from \"./test.js\"\n\nimport { State } from \"./core/state_management\"\nimport { SceneNode } from \"./core/scene_node\"\nimport { GameText } from \"./core/game_text\"\nimport { Monitor } from \"./core/monitor\"\nimport { RectangleBounds } from \"./core/bounds\"\nimport { transformToString } from \"./core/transform\"\n\nimport { Button } from \"./ui/button\"\nimport { Panel } from \"./ui/panel\"\nimport { Label } from \"./ui/label\"\nimport { Checkbox } from \"./ui/checkbox\"\n\nimport { noop } from \"./core/utils\"\n\nlet atlases = null;\nconst test = new State();\n\nlet tex1 = null;\nlet tex2 = null;\nlet panelTex = null;\nlet label = null;\nlet check1 = null;\nlet check2 = null;\n// This will run before onEnter/onUpdate/onExit\nbuildAndRun(test, (_atlases) => {\n  atlases = _atlases;\n  console.log(atlases);\n  const [greyAtlas, blueAtlas] = atlases;\n  tex1 = blueAtlas.get(\"blue_button00\");\n  tex2 = blueAtlas.get(\"blue_button01\");\n  panelTex = greyAtlas.get(\"grey_panel\");\n  check1 = blueAtlas.get(\"blue_boxCheckmark\");\n  check2 = blueAtlas.get(\"blue_boxCross\");\n});\n\n// Let's make a TEXT BOOX BOIIIII\n// Also something like a panel ain't bad\n// Actually let's try that first\n\nlet button = null;\nlet panel = null;\nlet checkbox = null;\nlabel = new Label(\"This is a Test\");\ncheckbox = new Checkbox(true);\ntest.updateList = [];\ntest.onEnter = function(stepTime, totalTime){\n  const root = this.manager.systems.scene_graph;\n\n  const panel = new Panel();\n  panel.init(panelTex, 500, 500);\n  root.addChild(panel.node);\n\n  label.init(panel.node);\n  label.node.text.style = \"blue\";\n  label.node.translation.x = 200;\n  label.node.translation.y = 200;\n\n  checkbox.init(panel.node, check1, check2);\n  checkbox.node.translation.x = 200;\n  checkbox.node.translation.y = 250;\n  checkbox.node.offset = {x: 0, y: 0};\n\n  checkbox.node.id = \"test\";\n  checkbox.oncheck = () => console.log(\"check\");\n  checkbox.onuncheck = () => console.log(\"uncheck\");\n\n  const timer_manager = this.manager.systems.timer_manager;\n\n  button = new Button(timer_manager);\n  button.onpress = function(){\n    this.textNode.text.text = \"PRESSED\"\n  }\n  button.onrelease = function(){\n    this.textNode.text.text = \"PRESSED\";\n  }\n  // Let's build a scene node and draw that one\n  const input_manager = this.manager.systems.input_manager\n\n\n  button.init(panel.node, tex1, tex2, \"A test!\");\n  button.node.translation.x = 100;\n  button.node.translation.y = 200;\n\n\n\n\n  const mouseMonitor = new Monitor().init(\n    root, input_manager.mousePosition,\n    (mp) => `Mouse Position: ${mp.x}, ${mp.y}`\n  );\n  const clickMonitor = new Monitor().init(\n    root, input_manager.lastClick,\n    (lc) => `Last Click: ${lc.x}, ${lc.y}`\n  );\n  const buttonMonitor = new Monitor().init(\n    root, button,\n    (b) => `Pressed: ${b.pressed}`\n  )\n\n  // Set it's position\n  mouseMonitor.node.translation = {x: 5, y: 16};\n  clickMonitor.node.translation = {x: 5, y: 16 * 2 + 5};\n  buttonMonitor.node.translation = {x: 5, y: 16 * 3 + 5 * 2};\n  this.updateList = this.updateList.concat([mouseMonitor, clickMonitor, buttonMonitor])\n}\n\ntest.onUpdate = function(stepTime, totalTime){\n  this.updateList.forEach((entry) => entry.update(stepTime, totalTime));\n}\ntest.onExit = function(){\n\n}\n\n// Let's try using our test file\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/main.js","import { SceneNode } from \"./scene_node\"\nimport { GameText } from \"./game_text\"\nclass Monitor {\n  constructor(){\n    this.target = null;\n    this.node = new SceneNode();\n    this.node.text = new GameText(\"Monitor\");\n    this.stringer = () => {};\n  }\n  init(parentNode, target, stringer = (target) => { return target.toString(); }){\n    this.target = target;\n    this.stringer = stringer;\n    parentNode.addChild(this.node);\n    return this;\n  }\n  update(stepTime, gameTime){\n    this.node.text.text = this.stringer(this.target);\n  }\n}\n\nexport { Monitor }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/core/monitor.js","import { SceneNode } from \"../core/scene_node\"\nimport { GameText } from \"../core/game_text\"\n\nimport { RectangleBounds } from \"../core/bounds\"\n\nimport { noop } from \"../core/utils\"\n\nclass Button {\n  constructor(timer_manager){\n    this.node = new SceneNode();\n    this.releasedNode = new SceneNode(this.node);\n    this.pressedNode = new SceneNode(this.node);\n    this.textNode = new SceneNode(this.node);\n    this.pressedNode.visible = false;\n    this.pressed = false;\n    this.onpress = noop;\n    this.onrelease = noop;\n    this._tm = timer_manager;\n    this._t = null;\n    this.depressDistance = 4;\n  }\n  init(parentNode, texture1, texture2, text = \"\"){\n    parentNode.addChild(this.node);\n    this.releasedNode.texture = texture1;\n    this.pressedNode.texture = texture2;\n    this.node.bounds = new RectangleBounds(texture1.width, texture1.height,{x:0.5, y:0.5});\n    this.node.onclick = () => {\n      this.press();\n    }\n\n    this.pressedNode.translation.y += this.depressDistance;\n    this.textNode.text = new GameText(text, \"center\");\n  }\n  press(){\n    this.pressed = true;\n    this.pressedNode.visible = true;\n    this.releasedNode.visible = false;\n    this.textNode.translation.y = 6;\n    this.onpress();\n    // Not sure about this implementation :/\n    if(this._t){\n      this._t.delay(1000);\n    } else {\n      this._t = this._tm.addTimerRelative(\n        1000, () => {\n          this.release()\n          this._t = null;\n        }\n      );\n    }\n  }\n  release(){\n    this.pressed = false;\n    this.pressedNode.visible = false;\n    this.releasedNode.visible = true;\n\n    this.textNode.translation.y = 0;\n    this.onrelease();\n  }\n}\n\nexport { Button };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/ui/button.js","import {Texture} from \"../core/texture\"\nimport {SceneNode} from \"../core/scene_node\"\n\nconst TL = {\n  x:0,\n  y:0\n};\nObject.freeze(TL);\n\nconst splitTextures = (texture, cornerLength) => {\n  let st = {\n    northwest: {},\n    north: {},\n    northeast: {},\n    west: {},\n    center: {},\n    east: {},\n    southwest: {},\n    south: {},\n    southeast: {}\n  };\n\n  let panel_center_w = texture.width - cornerLength*2;\n  let panel_center_h = texture.height - cornerLength*2;\n\n  console.log(panel_center_w);\n  console.log(panel_center_h);\n\n  for(let sub in st){\n    Object.assign(st[sub], texture);\n  }\n  console.log(st);\n\n  // North Row\n  st.northwest.name += \"_NW\";\n  st.northwest.width = cornerLength;\n  st.northwest.height = cornerLength;\n\n  st.north.name += \"_N\";\n  st.north.width = panel_center_w;\n  st.north.height = cornerLength;\n  st.north.x += cornerLength;\n\n  st.northeast.name += \"_NE\";\n  st.northeast.width = cornerLength;\n  st.northeast.height = cornerLength;\n  st.northeast.x += cornerLength + panel_center_w;\n\n  // Center Row\n  st.west.name += \"_W\";\n  st.west.width = cornerLength;\n  st.west.height = panel_center_h;\n  st.west.y += cornerLength;\n\n  st.center.name += \"_C\";\n  st.center.width = panel_center_w;\n  st.center.height = panel_center_h;\n  st.center.x += cornerLength;\n  st.center.y += cornerLength;\n\n  st.east.name += \"_E\";\n  st.east.width = cornerLength;\n  st.east.height = panel_center_h;\n  st.east.x += cornerLength + panel_center_w;\n  st.east.y += cornerLength;\n\n  st.southwest.name += \"_SW\";\n  st.southwest.width = cornerLength;\n  st.southwest.height = cornerLength;\n\n  st.southwest.y += cornerLength + panel_center_h;\n\n  st.south.name += \"_S\";\n  st.south.width = panel_center_w;\n  st.south.height = cornerLength;\n  st.south.x += cornerLength;\n  st.south.y += cornerLength + panel_center_h;\n\n  st.southeast.name += \"_SE\";\n  st.southeast.width = cornerLength;\n  st.southeast.height = cornerLength;\n  st.southeast.x += cornerLength + panel_center_w;\n  st.southeast.y += cornerLength + panel_center_h;\n\n  return st;\n};\n\nclass Panel {\n  constructor(){\n\n  }\n  init(texture, width, height, cornerLength = 10){\n    // we have a terrible error\n    if(texture == null){\n      throw new Error(\"Panel must have a texture\");\n    }\n\n    this.texture = texture;;\n    this.cornerLength = cornerLength;\n    const subtextures = splitTextures(this.texture, this.cornerLength);\n\n    this.node = new SceneNode();\n    this._width = width;\n    this._height = height;\n\n    let txOffset = {\n      x: subtextures.northwest.x,\n      y: subtextures.northwest.y\n    }\n    const nodes = {};\n    for(let st in subtextures){\n      let node = new SceneNode(this.node);\n      let tex = subtextures[st]\n      node.texture = tex;\n      node.offset = TL;\n      nodes[st] = node;\n      node.visible = false;\n    }\n\n    const centerScaleW = (this._width - cornerLength * 2)/(this.texture.width - cornerLength * 2);\n    const centerScaleH = (this._height - cornerLength * 2)/(this.texture.height - cornerLength * 2);\n\n\n    nodes.northwest.visible = true;\n\n    nodes.north.visible = true;\n    nodes.north.translation.x += cornerLength;\n    nodes.north.scale.x = centerScaleW;\n\n    nodes.northeast.visible = true;\n    nodes.northeast.translation.x += this._width - cornerLength;\n\n    nodes.west.visible = true;\n    nodes.west.translation.y += cornerLength;\n    nodes.west.scale.y = centerScaleH;\n\n    nodes.center.visible = true;\n    nodes.center.translation.x += cornerLength;\n    nodes.center.translation.y += cornerLength;\n    nodes.center.scale.x = centerScaleW;\n    nodes.center.scale.y = centerScaleH;\n\n    nodes.east.visible = true;\n    nodes.east.translation.x += this._width - cornerLength;\n    nodes.east.translation.y += cornerLength;\n    nodes.east.scale.y = centerScaleH;\n\n    nodes.southwest.visible = true;\n    nodes.southwest.translation.y += this._height - cornerLength;\n\n    nodes.south.visible = true;\n    nodes.south.translation.x += cornerLength;\n    nodes.south.translation.y += this._height - cornerLength;\n    nodes.south.scale.x = centerScaleW;\n\n    nodes.southeast.visible = true;\n    nodes.southeast.translation.x += this._width - cornerLength;\n    nodes.southeast.translation.y += this._height - cornerLength;\n\n  }\n\n}\n\nexport { Panel };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/ui/panel.js","import { SceneNode } from \"../core/scene_node\"\nimport { GameText } from \"../core/game_text\"\n\nclass Label {\n  constructor(text){\n    this.node = new SceneNode();\n    this.node.text = new GameText();\n    this.node.text.text = text;\n  }\n  init(parentNode){\n    if(parentNode){\n      parentNode.addChild(this.node);\n    }\n    return this;\n  }\n  // Hey, let's try some FANCY shit\n  get text(){\n    return this.node.text.text;\n  }\n  set text(t){\n    this.node.text.text = t;\n  }\n}\n\nexport { Label };\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/ui/label.js","import { SceneNode } from \"../core/scene_node\"\nimport { noop } from \"../core/utils\"\n\nimport { RectangleBounds } from \"../core/bounds\"\n\nclass Checkbox {\n  constructor(checked = false){\n    this.checked = checked;\n    this.node = new SceneNode();\n    this._texChecked = null;\n    this._texUnchecked = null;\n    this.oncheck = noop;\n    this.onuncheck = noop;\n    this.node.bounds = null;\n  }\n  init(parentNode, texChecked, texUnchecked){\n    if(parentNode){\n      parentNode.addChild(this.node);\n    }\n    this._texChecked = texChecked;\n    this._texUnchecked = texUnchecked;\n    this.node.texture = this.checked\n      ? this._texChecked\n      : this._texUnchecked\n\n    this.node.bounds = new RectangleBounds(this._texChecked.width, this._texChecked.height);\n    this.node.onclick = () => {\n      this.toggle();\n    }\n    return this;\n  }\n\n  toggle(){\n    if(this.checked){\n      this.uncheck();\n    } else {\n      this.check();\n    }\n  }\n  check(){\n    this.checked = true;\n    this.oncheck();\n    this.node.texture = this._texChecked;\n  }\n  uncheck(){\n    this.checked = false;\n    this.onuncheck();\n    this.node.texture = this._texUnchecked;\n  }\n}\n\nexport { Checkbox }\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/engine/ui/checkbox.js"],"sourceRoot":""}